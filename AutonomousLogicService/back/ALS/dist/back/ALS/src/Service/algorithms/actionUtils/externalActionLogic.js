'use strict';const a13_0x3c3cfb=a13_0x48f0;(function(_0x36b5f4,_0x13590f){const _0x523432=a13_0x48f0,_0x330c6f=_0x36b5f4();while(!![]){try{const _0x3dedd8=parseInt(_0x523432(0x1ec))/0x1*(-parseInt(_0x523432(0x210))/0x2)+-parseInt(_0x523432(0x202))/0x3*(parseInt(_0x523432(0x20d))/0x4)+-parseInt(_0x523432(0x206))/0x5+parseInt(_0x523432(0x1fc))/0x6+parseInt(_0x523432(0x1ff))/0x7+-parseInt(_0x523432(0x215))/0x8+parseInt(_0x523432(0x1f2))/0x9;if(_0x3dedd8===_0x13590f)break;else _0x330c6f['push'](_0x330c6f['shift']());}catch(_0x2ea1d6){_0x330c6f['push'](_0x330c6f['shift']());}}}(a13_0x1c94,0xa8909));function a13_0x1c94(){const _0x51b7be=['LEVEL','action','actionSensorByType,\x20THEN:','metadata','21040488SOukyx','__esModule','log','assign','info','DropHeightAGL','startAction','../../../../../../classes/dataClasses/api/api_enums','../../conditions/algorithmConditionManager','taskId','880506QLtLNC','requestToExternalServer','RequestManager','7157724myrmPR','Logger','-\x20startAction\x20-\x20then\x20-','897924EIwvWr','ExternalActionLogic','-\x20startAction\x20-','ExternalService_API','3121560KCwLJU','sensorType','stringify','error','defineProperty','toISOString','../../../logger/Logger','8XSjfjW','drop','ALS_ACTION_STATUS','6pCFoDo','actionSensorByType','then','-\x20endAction\x20-\x20','actionSensorByType,\x20REQUEST:','7725496XZqVRm','lodash','success','actionKey','209353RdcEFc','catch'];a13_0x1c94=function(){return _0x51b7be;};return a13_0x1c94();}Object[a13_0x3c3cfb(0x20a)](exports,a13_0x3c3cfb(0x1f3),{'value':!![]}),exports[a13_0x3c3cfb(0x203)]=void 0x0;function a13_0x48f0(_0x2d8ad5,_0x22db18){const _0x1c94f=a13_0x1c94();return a13_0x48f0=function(_0x48f039,_0x12a287){_0x48f039=_0x48f039-0x1eb;let _0x1b8a84=_0x1c94f[_0x48f039];return _0x1b8a84;},a13_0x48f0(_0x2d8ad5,_0x22db18);}const _=require(a13_0x3c3cfb(0x216)),api_enums_1=require(a13_0x3c3cfb(0x1f9)),all_typings_1=require('../../../../../../classes/typings/all.typings'),requestManager_1=require('../../../AppServices/connections/restConnections/requestManager'),Logger_1=require(a13_0x3c3cfb(0x20c)),algorithmConditionManager_1=require(a13_0x3c3cfb(0x1fa));class ExternalActionLogic{constructor(){const _0x529041=a13_0x3c3cfb;this[_0x529041(0x1f8)]=(_0x5970b1,_0x4d497e)=>{return new Promise((_0x44b530,_0x2afb95)=>{const _0xa78d3c=a13_0x48f0;let _0x327f43=![];const _0x4af0ff=_0x4d497e['action'];if(_0x4af0ff[_0xa78d3c(0x1f7)]!==undefined&&_0x4af0ff[_0xa78d3c(0x207)]!==undefined){const _0x4ea0a9={'action':_0x4af0ff[_0xa78d3c(0x1ef)]||all_typings_1['ACTION'][_0xa78d3c(0x20e)],'sensorTypeId':_0x4af0ff[_0xa78d3c(0x207)],'actionKey':{'flightId':_0x5970b1[_0xa78d3c(0x1fb)],'pointId':_0x5970b1['pointId'],'actionId':_0x4d497e['actionId']},'metadata':Object['assign'](Object[_0xa78d3c(0x1f5)]({},_0x4d497e[_0xa78d3c(0x1f1)]),{'flightId':_0x5970b1[_0xa78d3c(0x1fb)]})};console[_0xa78d3c(0x1f4)](new Date()[_0xa78d3c(0x20b)](),_0xa78d3c(0x214),JSON[_0xa78d3c(0x208)](_0x4ea0a9)),this['log'](_0xa78d3c(0x204),{'url':api_enums_1[_0xa78d3c(0x205)][_0xa78d3c(0x211)],'data':{'request':_0x4ea0a9,'environments':_0x5970b1,'autonomousAction':_0x4d497e}}),requestManager_1[_0xa78d3c(0x1fe)][_0xa78d3c(0x1fd)](api_enums_1[_0xa78d3c(0x205)]['actionSensorByType'],_0x4ea0a9)[_0xa78d3c(0x212)](_0x314e85=>{const _0x4f0441=_0xa78d3c;console[_0x4f0441(0x1f4)](new Date()[_0x4f0441(0x20b)](),_0x4f0441(0x1f0),JSON[_0x4f0441(0x208)](_0x314e85));if(_0x314e85[_0x4f0441(0x217)]){}else _0x327f43=algorithmConditionManager_1['AlgorithmConditionManager']['externalUpdate'](_0x4ea0a9[_0x4f0441(0x1eb)]);this[_0x4f0441(0x1f4)](_0x4f0441(0x201),{'url':api_enums_1[_0x4f0441(0x205)][_0x4f0441(0x211)],'data':{'request':_0x4ea0a9,'response':_0x314e85,'environments':_0x5970b1}}),_0x44b530(_0x314e85);})[_0xa78d3c(0x1ed)](_0xb492dc=>{const _0x5e2114=_0xa78d3c;console['log'](new Date()[_0x5e2114(0x20b)](),'actionSensorByType,\x20CATCH:',JSON[_0x5e2114(0x208)](_0xb492dc)),this[_0x5e2114(0x1f4)]('-\x20startAction\x20-\x20catch\x20-',{'url':api_enums_1[_0x5e2114(0x205)]['actionSensorByType'],'data':{'request':_0x4ea0a9,'rexponse':_0xb492dc}},all_typings_1['LEVEL'][_0x5e2114(0x209)]),_0x2afb95(_0xb492dc);}),_0x327f43=!![];}});},this['endAction']=(_0x425978,_0x510393)=>{return new Promise((_0x5cdd15,_0x1ac09f)=>{const _0x46907f=a13_0x48f0,_0x5465f5={'success':!![],'data':{'actionStatus':all_typings_1[_0x46907f(0x20f)]['fail']}};this['log'](_0x46907f(0x213),_0x5465f5,all_typings_1[_0x46907f(0x1ee)][_0x46907f(0x209)]),_0x5cdd15(_0x5465f5);});},this[_0x529041(0x1f4)]=(_0x301ae9,_0x1d47bd,_0x307c09=all_typings_1[_0x529041(0x1ee)][_0x529041(0x1f6)])=>{const _0x5a643d=_0x529041;Logger_1[_0x5a643d(0x200)][_0x5a643d(0x1f4)]({'type':all_typings_1['LEVEL'][_0x5a643d(0x1f6)],'prefix':'-\x20ExternalActionLogic\x20-\x20'+_0x301ae9,'message':_0x1d47bd});};}}exports[a13_0x3c3cfb(0x203)]=ExternalActionLogic;