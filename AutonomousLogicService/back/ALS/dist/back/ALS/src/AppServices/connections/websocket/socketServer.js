'use strict';function a4_0x2617(_0x24a595,_0x56f4fc){const _0x42821b=a4_0x4282();return a4_0x2617=function(_0x2617b7,_0x1f0e58){_0x2617b7=_0x2617b7-0x16e;let _0x51635f=_0x42821b[_0x2617b7];return _0x51635f;},a4_0x2617(_0x24a595,_0x56f4fc);}const a4_0x4b50a7=a4_0x2617;(function(_0x5caf3a,_0x323b55){const _0xa65877=a4_0x2617,_0x2bd6b9=_0x5caf3a();while(!![]){try{const _0x7aaf52=parseInt(_0xa65877(0x189))/0x1*(parseInt(_0xa65877(0x198))/0x2)+-parseInt(_0xa65877(0x19e))/0x3+-parseInt(_0xa65877(0x18c))/0x4+-parseInt(_0xa65877(0x188))/0x5+-parseInt(_0xa65877(0x17e))/0x6+parseInt(_0xa65877(0x196))/0x7*(parseInt(_0xa65877(0x178))/0x8)+parseInt(_0xa65877(0x17a))/0x9*(parseInt(_0xa65877(0x195))/0xa);if(_0x7aaf52===_0x323b55)break;else _0x2bd6b9['push'](_0x2bd6b9['shift']());}catch(_0x46df36){_0x2bd6b9['push'](_0x2bd6b9['shift']());}}}(a4_0x4282,0x7f766));function a4_0x4282(){const _0xdeff70=['listen','emit','3130uHvHRC','35pbZOuy','info','12RrcNix','connection','../../../logger/Logger','Logger','stringify','Server','2509383gzOVfJ','error','keys','push','send','instance','remoteAddress','url','OPEN','toISOString','token','-\x20server.on(\x27message\x27...','webSocketServer','832136dflriI','server\x20|\x20WS\x20closed','55611dJALYS','defineProperty','server\x20|\x20socket\x20error','readyState','57600LMHFQn','websocketClients','hasOwnProperty','clients','close','ERROR:\x20index\x20out\x20of\x20range','externalSortConfig','../../../../../../classes/typings/all.typings','setServer','SocketServer','1960210NrSskX','28061eaTmKB','splice','server\x20|\x20socket\x20disconnected','3449156gnQRjo','addToSortConfig','log','parse','split','forEach','__esModule'];a4_0x4282=function(){return _0xdeff70;};return a4_0x4282();}Object[a4_0x4b50a7(0x17b)](exports,a4_0x4b50a7(0x192),{'value':!![]}),exports[a4_0x4b50a7(0x187)]=void 0x0;const WebSocket=require('ws'),all_typings_1=require(a4_0x4b50a7(0x185)),Logger_1=require(a4_0x4b50a7(0x19a));class SocketServer{constructor(){const _0x2817bf=a4_0x4b50a7;this[_0x2817bf(0x184)]={},this[_0x2817bf(0x17f)]=[],this['removeListener']=_0x180305=>{const _0x1b9476=_0x2817bf,_0x3530a5=[];this['websocketClients'][_0x1b9476(0x191)]((_0x55b3a9,_0x46256f)=>{const _0x27ebf1=_0x1b9476;this[_0x27ebf1(0x17f)][_0x46256f][_0x27ebf1(0x175)]===_0x180305&&_0x3530a5['push'](_0x46256f);});try{_0x3530a5[_0x1b9476(0x191)](_0x3bdc4f=>{const _0x10f7b0=_0x1b9476;this[_0x10f7b0(0x17f)][_0x10f7b0(0x18a)](_0x3bdc4f,0x1);});}catch(_0x2c062b){console[_0x1b9476(0x18e)](_0x1b9476(0x183));}},this[_0x2817bf(0x186)]=_0x43aef2=>{const _0x2fd55b=_0x2817bf;this[_0x2fd55b(0x177)]=new WebSocket[(_0x2fd55b(0x19d))]({'server':_0x43aef2}),this[_0x2fd55b(0x177)]['on'](_0x2fd55b(0x199),(_0x127743,_0x833b3c,_0x5832c3,_0x482cc1)=>{const _0x55aa95=_0x2fd55b;console[_0x55aa95(0x18e)](new Date()[_0x55aa95(0x174)](),'server\x20|\x20Socket\x20client\x20connected');const _0x258e9e=_0x833b3c['socket'][_0x55aa95(0x171)],_0xbc2541=_0x833b3c[_0x55aa95(0x172)]||'',_0x36a614=_0xbc2541[_0x55aa95(0x190)]('?'),_0x355087=_0x36a614[0x1],_0x35de5e={'ws':_0x127743,'token':_0x355087};this[_0x55aa95(0x17f)][_0x55aa95(0x16e)](_0x35de5e),this[_0x55aa95(0x193)](_0x127743);}),this['webSocketServer']['on'](_0x2fd55b(0x19f),_0x44e2ab=>{const _0x393213=_0x2fd55b;console[_0x393213(0x18e)]('server\x20|\x20WS\x20error',_0x44e2ab);}),this[_0x2fd55b(0x177)]['on']('close',_0x19af0d=>{const _0x54bdb0=_0x2fd55b;console[_0x54bdb0(0x18e)](_0x54bdb0(0x179),_0x19af0d),setTimeout(()=>{const _0x342a00=_0x54bdb0;this[_0x342a00(0x186)](_0x43aef2);},0x3e8);});},this['disconnect']=_0x560c4d=>{const _0x103add=_0x2817bf;_0x560c4d[_0x103add(0x182)]();},this[_0x2817bf(0x18d)]=_0x27aaa1=>{const _0x5cdba5=_0x2817bf;for(const _0x4bceb9 in _0x27aaa1){_0x27aaa1[_0x5cdba5(0x180)](_0x4bceb9)&&(this[_0x5cdba5(0x184)][_0x4bceb9]=Object['assign'](Object['assign']({},this['externalSortConfig'][_0x4bceb9]),{'listener':_0x27aaa1[_0x4bceb9]}));}},this['listen']=_0x5a25eb=>{const _0x3df7e5=_0x2817bf;_0x5a25eb['on']('message',_0x37e72b=>{const _0x351146=a4_0x2617;try{const _0x500743=JSON[_0x351146(0x18f)](_0x37e72b),_0x43f56f=Object[_0x351146(0x1a0)](_0x500743)[0x0];if(_0x43f56f&&this[_0x351146(0x184)][_0x43f56f])for(const _0x822408 in this[_0x351146(0x184)][_0x43f56f]){this['externalSortConfig'][_0x43f56f][_0x351146(0x180)](_0x822408)&&this['externalSortConfig'][_0x43f56f][_0x822408](_0x500743[_0x43f56f]);}}catch(_0x2eb945){console[_0x351146(0x19f)](new Date(),_0x2eb945),this[_0x351146(0x18e)](_0x351146(0x176),{'error':_0x2eb945,'message':_0x37e72b});}}),_0x5a25eb['on'](_0x3df7e5(0x19f),_0x31de99=>{const _0x44bd82=_0x3df7e5;console[_0x44bd82(0x18e)](_0x44bd82(0x17c),_0x31de99);}),_0x5a25eb['on'](_0x3df7e5(0x182),_0x16367b=>{const _0x4f5232=_0x3df7e5;console[_0x4f5232(0x18e)](_0x4f5232(0x18b),_0x16367b);});},this[_0x2817bf(0x194)]=(_0x204b16,_0x92c700)=>{const _0x29bd08=_0x2817bf;this['webSocketServer']&&this[_0x29bd08(0x177)]['clients']&&this['webSocketServer'][_0x29bd08(0x181)]['forEach'](_0x33bc6b=>{const _0x7c6300=_0x29bd08;if(_0x33bc6b[_0x7c6300(0x17d)]===WebSocket[_0x7c6300(0x173)]){const _0x88c34c=JSON[_0x7c6300(0x19c)]({[_0x204b16]:_0x92c700});_0x33bc6b[_0x7c6300(0x16f)](_0x88c34c);}});},this[_0x2817bf(0x18e)]=(_0xd12af3,_0x384add,_0x2279d9=all_typings_1['LEVEL'][_0x2817bf(0x197)])=>{const _0x1586d7=_0x2817bf;Logger_1[_0x1586d7(0x19b)][_0x1586d7(0x18e)]({'type':_0x2279d9,'prefix':'-\x20SocketServer\x20-\x20'+_0xd12af3,'message':_0x384add});};}}exports['SocketServer']=SocketServer,SocketServer[a4_0x4b50a7(0x170)]=new SocketServer(),SocketServer[a4_0x4b50a7(0x186)]=SocketServer[a4_0x4b50a7(0x170)][a4_0x4b50a7(0x186)],SocketServer['addToSortConfig']=SocketServer[a4_0x4b50a7(0x170)][a4_0x4b50a7(0x18d)],SocketServer[a4_0x4b50a7(0x194)]=SocketServer[a4_0x4b50a7(0x170)][a4_0x4b50a7(0x194)];