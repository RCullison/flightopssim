'use strict';const a10_0x5c5eaf=a10_0x6b1d;(function(_0x291f35,_0x1a5413){const _0x2c29c3=a10_0x6b1d,_0x2d6b2e=_0x291f35();while(!![]){try{const _0x282406=-parseInt(_0x2c29c3(0x96))/0x1+-parseInt(_0x2c29c3(0x94))/0x2+parseInt(_0x2c29c3(0xba))/0x3*(parseInt(_0x2c29c3(0x9f))/0x4)+-parseInt(_0x2c29c3(0xb4))/0x5*(-parseInt(_0x2c29c3(0xb7))/0x6)+parseInt(_0x2c29c3(0x85))/0x7+parseInt(_0x2c29c3(0x93))/0x8*(-parseInt(_0x2c29c3(0xa6))/0x9)+-parseInt(_0x2c29c3(0x88))/0xa;if(_0x282406===_0x1a5413)break;else _0x2d6b2e['push'](_0x2d6b2e['shift']());}catch(_0x3b98db){_0x2d6b2e['push'](_0x2d6b2e['shift']());}}}(a10_0x34db,0x3ff53));Object[a10_0x5c5eaf(0x92)](exports,a10_0x5c5eaf(0xbb),{'value':!![]}),exports['LookAtTargetLogic']=void 0x0;const _=require(a10_0x5c5eaf(0xaa)),convertation_1=require(a10_0x5c5eaf(0xa9)),geoCalc_1=require(a10_0x5c5eaf(0xa4)),enums_1=require(a10_0x5c5eaf(0x97)),droneManager_1=require(a10_0x5c5eaf(0x90)),lookAtTargetManager_1=require(a10_0x5c5eaf(0xa5)),UDPClientForce_1=require(a10_0x5c5eaf(0x9c)),toDegree=0xb4/Math['PI'],gimbalServiceConfig=require(a10_0x5c5eaf(0xb1)),sendInterval=gimbalServiceConfig['sendInterval'];class LookAtTargetLogic{constructor(){const _0x51df7c=a10_0x5c5eaf;this[_0x51df7c(0x8f)]=()=>{return!![];},this[_0x51df7c(0xb3)]=()=>{return this['tryClearInterval']();},this[_0x51df7c(0xa2)]=()=>{return!![];},this[_0x51df7c(0x8e)]=undefined,this[_0x51df7c(0xa7)]=()=>{const _0x4d04ea=_0x51df7c,_0xf1ba44=droneManager_1['DroneManager'][_0x4d04ea(0xb6)](),_0xe5696b=lookAtTargetManager_1['LookAtTargetManager'][_0x4d04ea(0xaf)](),_0x4b9605=lookAtTargetManager_1[_0x4d04ea(0xb0)][_0x4d04ea(0xbc)]();if(_0xe5696b&&_0x4b9605){const _0x3fe1b3=this['computeLookAtTargetCommandNewLogic'](_0xf1ba44,_0xe5696b);if(_0x3fe1b3){const _0x245f12=Object['assign']({},_0x3fe1b3),_0x19ec35={'action':enums_1[_0x4d04ea(0xbd)][_0x4d04ea(0x86)],'type':enums_1['typesUDP'][_0x4d04ea(0x89)],'yaw':_0x3fe1b3['yaw'],'pitch':_0x3fe1b3['pitch'],'roll':0x0};if(!this[_0x4d04ea(0x8e)]||Math['abs'](this[_0x4d04ea(0x8e)]['yaw']-_0x3fe1b3[_0x4d04ea(0xa3)])>=0x1||Math[_0x4d04ea(0xac)](this[_0x4d04ea(0x8e)]['pitch']-_0x3fe1b3[_0x4d04ea(0x8c)])>=0x1){this[_0x4d04ea(0x8e)]=_0x19ec35,console[_0x4d04ea(0xb8)](new Date(),_0x4d04ea(0x8c),_0x19ec35[_0x4d04ea(0x8c)],'\x09',_0x4d04ea(0xa3),_0x19ec35[_0x4d04ea(0xa3)]);const _0x20cba5={'type':_0x19ec35[_0x4d04ea(0xb2)],'pitch':_0x19ec35[_0x4d04ea(0x8c)],'roll':_0x19ec35[_0x4d04ea(0x95)],'yaw':_0x19ec35[_0x4d04ea(0xa3)],'action':_0x19ec35[_0x4d04ea(0x8d)]};UDPClientForce_1[_0x4d04ea(0x9d)]['emit'](_0x20cba5);}else{}}}else{}},this[_0x51df7c(0xa8)]=(_0x1105a4,_0x33f110)=>{const _0x1510c1=_0x51df7c;let _0x421da3;const _0x46ad78=_0x1105a4['heading']||0x0,_0x5cf737=convertation_1[_0x1510c1(0xa0)][_0x1510c1(0x98)](_0x1105a4[_0x1510c1(0x84)]);if(_0x5cf737&&_0x33f110){const _0x4da787=geoCalc_1['GeoCalc'][_0x1510c1(0xab)](convertation_1[_0x1510c1(0xa0)][_0x1510c1(0xa1)](_0x5cf737),_0x33f110),_0x1633d1=geoCalc_1[_0x1510c1(0x9e)][_0x1510c1(0x9b)](_0x5cf737,convertation_1[_0x1510c1(0xa0)][_0x1510c1(0x98)](_0x33f110))||0.000001,_0x1a6afd=this['computeDeltaHeightNewLogic'](_0x1105a4,_0x33f110),_0x4c8774=Math[_0x1510c1(0xb5)](_0x1a6afd/_0x1633d1)*toDegree;let _0x180cb5=geoCalc_1[_0x1510c1(0x9e)][_0x1510c1(0x8a)](_0x4da787);_0x421da3={'pitch':-_0x4c8774,'yaw':_0x180cb5};}return _0x421da3;},this[_0x51df7c(0x99)]=(_0x1f53a4,_0x40bdb3)=>{const _0x1c1f24=_0x51df7c;let _0x4e90da=0x0,_0x2613ad=0x0;_0x40bdb3&&_0x40bdb3[_0x1c1f24(0xae)]&&_0x40bdb3[_0x1c1f24(0xae)][_0x1c1f24(0xb9)]&&_0x40bdb3[_0x1c1f24(0xae)]['coordinates']!==undefined&&(_0x2613ad=_0x40bdb3[_0x1c1f24(0xae)][_0x1c1f24(0xb9)][0x2]);const _0x594bfb=_0x1f53a4[_0x1c1f24(0x87)]+(_0x1f53a4['takeoffASLHeight']||0x0),_0x400bf6=_0x594bfb-_0x2613ad;return _0x4e90da=_0x400bf6,_0x4e90da;},console[_0x51df7c(0xb8)](new Date()[_0x51df7c(0xad)](),_0x51df7c(0x9a),sendInterval),this[_0x51df7c(0x91)]=setInterval(()=>{this['computeGimbalCommands']();},sendInterval);}}function a10_0x6b1d(_0x57d6cf,_0x510148){const _0x34db9f=a10_0x34db();return a10_0x6b1d=function(_0x6b1d60,_0x415a86){_0x6b1d60=_0x6b1d60-0x84;let _0x4638f2=_0x34db9f[_0x6b1d60];return _0x4638f2;},a10_0x6b1d(_0x57d6cf,_0x510148);}exports[a10_0x5c5eaf(0xbe)]=LookAtTargetLogic,LookAtTargetLogic[a10_0x5c5eaf(0x8b)]=new LookAtTargetLogic(),LookAtTargetLogic['startComputeGimbal']=LookAtTargetLogic['instance'][a10_0x5c5eaf(0x8f)],LookAtTargetLogic[a10_0x5c5eaf(0xb3)]=LookAtTargetLogic[a10_0x5c5eaf(0x8b)][a10_0x5c5eaf(0xb3)];function a10_0x34db(){const _0x247a08=['144WLAHTI','computeGimbalCommands','computeLookAtTargetCommandNewLogic','../../../../../classes/applicationClasses/utility/convertation','lodash','calcBearing','abs','toISOString','geometry','getGimbalTarget','LookAtTargetManager','./../../../../../../../../config/gimbalServiceConfig.json','type','stopComputeGimbal','5tNRPrl','atan','getDrone','3026124dAhepf','log','coordinates','3jTpnln','__esModule','getIsLookAtTarget','SEND_UDP_ACTIONS','LookAtTargetLogic','location','1720950xWPqOy','GIMBAL','height','2476620fakxId','AGCS','angleTo0_360','instance','pitch','action','LastSendGimbalCommandToSend','startComputeGimbal','../drones/droneManager','computeGimbalInterval','defineProperty','63520sduRrx','164338XHuwuV','roll','135095CELzfy','../../../../../classes/typings/enums','GeoPoint_to_POINT','computeDeltaHeightNewLogic','LookAtTargetLogic,\x20sendInterval:','calcDistance','../../applicationServices/UDP/UDPClientForce','UDPClientForce','GeoCalc','414932Nboamb','Convertation','POINT_to_GeoPoint','tryClearInterval','yaw','../../../../../classes/applicationClasses/utility/geoCalc','./lookAtTargetManager'];a10_0x34db=function(){return _0x247a08;};return a10_0x34db();}