'use strict';function a107_0xccc8(){const _0x1c1626=['2002781kBFdUU','action_time_limit','isApproval','isForce','data','2422BHuzUi','set','PointOfRoute','log','has_action','gimbal_pitch_mode','6YVMCrt','longitude','updateActionOnRouteEnd','hasOwnProperty','./../../../../../../config/defaultConfig.json','isCheckedUTM','action_on_finish','MaxVelocityForFlyToInMetersPerSecond','array','velocity','endOfRoutePattern','defaultDroneParameters.defaultVelocityForFlyToInMetersPerSecond','updateRoutePoints','Hold','RoutePoints','3057021GhDxWs','fixPointsHeight_ROUTE_POINT_DATA_DRONESERVICE','auto','trace_mode','push','success','yaw','30oyQANM','mission_exec_times','2683898lnSmqC','cutStaticPath','__esModule','3oesirA','updateCutStaticPath','ACTION_ON_ROUTE_END','damping_distance','toISOString','updatePoints','pointsToJson','toPOINT','toJsonForUI','idle_velocity','13670940YpLiWz','get','boolean','defineProperty','forEach','points','saveConfig','target_gimbal_pitch','AltFromDrone','updateYaw_mode','config','updateVersion','latitude','version','isArray','YawMode','563sAHsNR','GeoUtility','saveConfigFromExternalSource','8dJXega','WaypointsComplex','toJsonForUtm','action_repeat','altitude','velocity_range','getRoute_POINT3D_Arr','yaw_mode','toJsonForDroneService','3246170VYuDuz','YAW_MODE','description','action_on_rc_lost','number','turn_mode','getRoute_POINT_Arr','1402364LZkcFz'];a107_0xccc8=function(){return _0x1c1626;};return a107_0xccc8();}const a107_0xc99aff=a107_0x1e3e;(function(_0x34b902,_0x498f90){const _0x1cb2df=a107_0x1e3e,_0x57b1a8=_0x34b902();while(!![]){try{const _0x54366c=-parseInt(_0x1cb2df(0x201))/0x1*(-parseInt(_0x1cb2df(0x21a))/0x2)+-parseInt(_0x1cb2df(0x1e7))/0x3*(-parseInt(_0x1cb2df(0x214))/0x4)+-parseInt(_0x1cb2df(0x20d))/0x5*(-parseInt(_0x1cb2df(0x220))/0x6)+-parseInt(_0x1cb2df(0x1e4))/0x7*(parseInt(_0x1cb2df(0x204))/0x8)+-parseInt(_0x1cb2df(0x1db))/0x9+parseInt(_0x1cb2df(0x1e2))/0xa*(parseInt(_0x1cb2df(0x215))/0xb)+-parseInt(_0x1cb2df(0x1f1))/0xc;if(_0x54366c===_0x498f90)break;else _0x57b1a8['push'](_0x57b1a8['shift']());}catch(_0x493d22){_0x57b1a8['push'](_0x57b1a8['shift']());}}}(a107_0xccc8,0x593bf));Object[a107_0xc99aff(0x1f4)](exports,a107_0xc99aff(0x1e6),{'value':!![]}),exports[a107_0xc99aff(0x205)]=void 0x0;function a107_0x1e3e(_0x2a84e9,_0x370f74){const _0xccc8fd=a107_0xccc8();return a107_0x1e3e=function(_0x1e3edc,_0x84eff5){_0x1e3edc=_0x1e3edc-0x1d9;let _0x5ccf6b=_0xccc8fd[_0x1e3edc];return _0x5ccf6b;},a107_0x1e3e(_0x2a84e9,_0x370f74);}const _=require('lodash'),geoUtility_1=require('../../applicationClasses/utility/geoUtility'),all_typings_1=require('../../typings/all.typings'),pointOfRoute_1=require('./pointOfRoute'),droneServiceConf=require('./../../../../../../config/droneServiceConfig.json'),defConf=require(a107_0xc99aff(0x224)),defaultVelocity=_['get'](defConf,a107_0xc99aff(0x22b),0xa),config={'isForce':{'type':a107_0xc99aff(0x1f3),'objType':'boolean','default':![],'required':![]},'action_on_finish':{'type':a107_0xc99aff(0x211),'objType':'number','default':0x0,'required':![],'min':0x0},'action_on_rc_lost':{'type':a107_0xc99aff(0x211),'objType':'number','default':0x0,'required':![],'min':0x0},'gimbal_pitch_mode':{'type':a107_0xc99aff(0x211),'objType':a107_0xc99aff(0x211),'default':0x0,'required':![],'min':0x0},'idle_velocity':{'type':a107_0xc99aff(0x211),'objType':'number','default':defaultVelocity,'required':![],'min':0x0},'mission_exec_times':{'type':a107_0xc99aff(0x211),'objType':a107_0xc99aff(0x211),'default':0x1,'required':![],'min':0x0},'damping_distance':{'type':'number','objType':'number','default':0x1,'required':![],'min':0x0},'target_gimbal_pitch':{'type':'number','objType':a107_0xc99aff(0x211),'default':0x0,'required':![],'min':0x0},'turn_mode':{'type':a107_0xc99aff(0x211),'objType':a107_0xc99aff(0x211),'default':0x0,'required':![],'min':0x0},'has_action':{'type':a107_0xc99aff(0x211),'objType':a107_0xc99aff(0x211),'default':0x0,'required':![],'min':0x0},'action_time_limit':{'type':a107_0xc99aff(0x211),'objType':'number','default':0xbb8,'required':![],'min':0x0},'action_repeat':{'type':'number','objType':a107_0xc99aff(0x211),'default':0x1,'required':![],'min':0x0},'trace_mode':{'type':a107_0xc99aff(0x211),'objType':'number','default':0x1,'required':![],'min':0x0},'velocity_range':{'type':'number','objType':'number','default':droneServiceConf[a107_0xc99aff(0x227)],'required':![],'min':0x0},'yaw_mode':{'type':a107_0xc99aff(0x211),'objType':a107_0xc99aff(0x211),'default':all_typings_1[a107_0xc99aff(0x20e)][a107_0xc99aff(0x1dd)],'required':![],'min':0x0},'points':{'type':a107_0xc99aff(0x228),'objType':pointOfRoute_1[a107_0xc99aff(0x21c)],'default':[],'required':!![],'min':0x2}};class WaypointsComplex{constructor(_0x4dc090){const _0x34e1f5=a107_0xc99aff;this[_0x34e1f5(0x1fb)]=config,this[_0x34e1f5(0x226)]=0x0,this[_0x34e1f5(0x210)]=0x0,this['gimbal_pitch_mode']=0x0,this['idle_velocity']=0x0,this[_0x34e1f5(0x1e3)]=0x0,this[_0x34e1f5(0x1ea)]=0x0,this[_0x34e1f5(0x1f8)]=0x0,this[_0x34e1f5(0x212)]=0x0,this[_0x34e1f5(0x21e)]=0x0,this[_0x34e1f5(0x216)]=0x0,this[_0x34e1f5(0x207)]=0x0,this['trace_mode']=0x1,this[_0x34e1f5(0x209)]=0x1,this[_0x34e1f5(0x20b)]=all_typings_1['YAW_MODE']['auto'],this['endOfRoutePattern']=all_typings_1[_0x34e1f5(0x1e9)][_0x34e1f5(0x1d9)],this[_0x34e1f5(0x1f9)]=![],this[_0x34e1f5(0x1f6)]=[],this[_0x34e1f5(0x217)]=![],this[_0x34e1f5(0x225)]=![],this[_0x34e1f5(0x1fe)]=0x0,this[_0x34e1f5(0x1f7)]={'id':'id','version':_0x34e1f5(0x1fe),'isForce':_0x34e1f5(0x218),'longitude':_0x34e1f5(0x221),'latitude':_0x34e1f5(0x1fd),'altitude':_0x34e1f5(0x208),'velocity':_0x34e1f5(0x229),'yaw':_0x34e1f5(0x1e1),'yaw_mode':_0x34e1f5(0x20b),'isApproval':_0x34e1f5(0x217),'isCheckedUTM':_0x34e1f5(0x225)},this['setValues']=(_0x5d0c6a,_0x2d6f32)=>{const _0x5ece97=_0x34e1f5;for(const _0xb953a0 in _0x2d6f32){_0x2d6f32[_0x5ece97(0x223)](_0xb953a0)&&_[_0x5ece97(0x1f2)](_0x5d0c6a,_0x2d6f32[_0xb953a0])!==undefined&&_[_0x5ece97(0x21b)](this,_0xb953a0,_[_0x5ece97(0x1f2)](_0x5d0c6a,_0x2d6f32[_0xb953a0]));}},this[_0x34e1f5(0x22c)]=_0x10baf4=>{const _0x252638=_0x34e1f5;for(const _0x5eb448 in this['saveConfigFromExternalSource']){this[_0x252638(0x203)][_0x252638(0x223)](_0x5eb448)&&_0x10baf4&&_0x10baf4['hasOwnProperty'](_0x5eb448)&&this[_0x252638(0x203)][_0x5eb448](_0x10baf4);}},this[_0x34e1f5(0x1ec)]=_0x5385a4=>{const _0x2c46b7=_0x34e1f5,_0x282bec=[];Array[_0x2c46b7(0x1ff)](_0x5385a4[_0x2c46b7(0x1da)])&&_0x5385a4['RoutePoints'][_0x2c46b7(0x1f5)](_0x24b935=>{const _0x4cc06d=_0x2c46b7,_0x5c5efe=new pointOfRoute_1[(_0x4cc06d(0x21c))](_0x24b935);_0x282bec['push'](_0x5c5efe);}),this[_0x2c46b7(0x1f6)]=_0x282bec;},this['updateVersion']=_0x5b488a=>{const _0x27aa03=_0x34e1f5;this['version']=_0x5b488a[_0x27aa03(0x1fe)];},this[_0x34e1f5(0x222)]=_0x3b46ff=>{this['endOfRoutePattern']=_0x3b46ff['ActionOnRouteEnd'];},this['updateAltFromDrone']=_0x112a1e=>{const _0x3ff688=_0x34e1f5;this[_0x3ff688(0x1f9)]=_0x112a1e[_0x3ff688(0x1f9)];},this[_0x34e1f5(0x1fa)]=_0x258adc=>{const _0xf59eb3=_0x34e1f5;this[_0xf59eb3(0x20b)]=+all_typings_1[_0xf59eb3(0x20e)][_0x258adc[_0xf59eb3(0x200)]]||0x0;},this[_0x34e1f5(0x1e8)]=_0x164f48=>{const _0x24071e=_0x34e1f5;this['cutStaticPath']=_0x164f48[_0x24071e(0x1e5)];},this[_0x34e1f5(0x203)]={'version':this[_0x34e1f5(0x1fc)],'ActionOnRouteEnd':this[_0x34e1f5(0x222)],'AltFromDrone':this['updateAltFromDrone'],'YawMode':this[_0x34e1f5(0x1fa)],'RoutePoints':this[_0x34e1f5(0x1ec)],'cutStaticPath':this[_0x34e1f5(0x1e8)]},this['pointsToJson']=()=>{const _0x48acc2=_0x34e1f5;let _0x51b547=[];this[_0x48acc2(0x1f6)][_0x48acc2(0x1f5)](_0xbce208=>{const _0x225fa1=_0x48acc2;_0x51b547[_0x225fa1(0x1df)](_0xbce208['toJsonForDroneService']());});const _0x2093ff=geoUtility_1[_0x48acc2(0x202)][_0x48acc2(0x1dc)](_0x51b547);return _0x2093ff[_0x48acc2(0x1e0)]?_0x51b547=_0x2093ff[_0x48acc2(0x219)]:console[_0x48acc2(0x21d)](new Date()[_0x48acc2(0x1eb)](),_0x2093ff[_0x48acc2(0x20f)]),_0x51b547;},this[_0x34e1f5(0x1ef)]=()=>{const _0x56fa5b=_0x34e1f5,_0x28eaed=[];return this[_0x56fa5b(0x1f6)][_0x56fa5b(0x1f5)](_0x517d86=>{_0x28eaed['push'](_0x517d86['toJsonForUI']());}),{'ActionOnRouteEnd':this[_0x56fa5b(0x22a)],'RoutePoints':_0x28eaed};},this['toJsonForDroneService']=()=>{const _0x40d822=_0x34e1f5;return{'AltFromDrone':this[_0x40d822(0x1f9)],'yaw_mode':this[_0x40d822(0x20b)],'points':this[_0x40d822(0x1ed)]()};},this['toJsonForOnboard']=()=>{const _0x2d54b7=_0x34e1f5,_0x61bda3=[];return this[_0x2d54b7(0x1f6)][_0x2d54b7(0x1f5)](_0x7cd0f9=>{const _0x296b85=_0x2d54b7;_0x61bda3[_0x296b85(0x1df)](_0x7cd0f9[_0x296b85(0x20c)]());}),{'isForce':this['isForce'],'action_on_finish':this[_0x2d54b7(0x226)],'action_on_rc_lost':this['action_on_rc_lost'],'gimbal_pitch_mode':this[_0x2d54b7(0x21f)],'idle_velocity':this[_0x2d54b7(0x1f0)],'mission_exec_times':this['mission_exec_times'],'damping_distance':this[_0x2d54b7(0x1ea)],'target_gimbal_pitch':this[_0x2d54b7(0x1f8)],'turn_mode':this[_0x2d54b7(0x212)],'has_action':this[_0x2d54b7(0x21e)],'action_time_limit':this[_0x2d54b7(0x216)],'action_repeat':this[_0x2d54b7(0x207)],'trace_mode':this[_0x2d54b7(0x1de)],'velocity_range':this[_0x2d54b7(0x209)],'yaw_mode':this[_0x2d54b7(0x20b)],'points':this[_0x2d54b7(0x1ed)]()};},this[_0x34e1f5(0x206)]=(_0x3ce510,_0x5cd6e8)=>{const _0x256336=_0x34e1f5,_0x22f121=[];return this[_0x256336(0x1f6)]['forEach'](_0x2a24a5=>{const _0x2d7984=_0x256336;_0x22f121[_0x2d7984(0x1df)](_0x2a24a5['toJsonForUtm']());}),!this['id']&&_0x3ce510&&(this['id']=_0x3ce510),{'pid':_0x5cd6e8||this['id'],'time':new Date()[_0x256336(0x1eb)](),'points':_0x22f121};},this[_0x34e1f5(0x213)]=()=>{const _0x52eee3=_0x34e1f5,_0x1bf6b1=[];return this[_0x52eee3(0x1f6)][_0x52eee3(0x1f5)](_0x3dc396=>{const _0x2ffdc3=_0x52eee3;_0x1bf6b1[_0x2ffdc3(0x1df)](_0x3dc396[_0x2ffdc3(0x1ee)]());}),_0x1bf6b1;},this[_0x34e1f5(0x20a)]=()=>{const _0x3fbb4b=_0x34e1f5,_0x3a0259=[];return this[_0x3fbb4b(0x1f6)]['forEach'](_0x469040=>{const _0x1c145f=_0x3fbb4b;_0x3a0259[_0x1c145f(0x1df)](_0x469040['toPOINT3D']());}),_0x3a0259;},this['id']=_0x4dc090;}}exports[a107_0xc99aff(0x205)]=WaypointsComplex;