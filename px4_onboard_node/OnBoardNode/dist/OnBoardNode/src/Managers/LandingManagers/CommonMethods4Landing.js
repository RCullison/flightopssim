'use strict';const a1_0x1c6a09=a1_0xfcab;(function(_0x58c4ce,_0x8d850){const _0x3e4125=a1_0xfcab,_0x43325f=_0x58c4ce();while(!![]){try{const _0x519d93=-parseInt(_0x3e4125(0x15e))/0x1+-parseInt(_0x3e4125(0x195))/0x2*(parseInt(_0x3e4125(0x14a))/0x3)+-parseInt(_0x3e4125(0x16f))/0x4*(parseInt(_0x3e4125(0x168))/0x5)+-parseInt(_0x3e4125(0x1a6))/0x6*(parseInt(_0x3e4125(0x177))/0x7)+-parseInt(_0x3e4125(0x19a))/0x8*(-parseInt(_0x3e4125(0x152))/0x9)+parseInt(_0x3e4125(0x172))/0xa+parseInt(_0x3e4125(0x17d))/0xb*(parseInt(_0x3e4125(0x146))/0xc);if(_0x519d93===_0x8d850)break;else _0x43325f['push'](_0x43325f['shift']());}catch(_0x924828){_0x43325f['push'](_0x43325f['shift']());}}}(a1_0x2f00,0xc378c));function a1_0x2f00(){const _0x3f4267=['__esModule','timeToOnboardRHSec','../../services/TCPUDP/serverUDP','./VisualLandManager','isAGL','homeData','4CAIeqm','log','validateLandingTypeOptic','10504800LPEwNP','emergencyPosition','VisualLandManager','push','NORMAL','14rRobaX','OPTIC','accurateOrVisualLandingDefaultValues','height_above_takeoff','doLand','minAltitudeTolerance','6270605wuSEHV','commonLandingValidateAndSetFields','lodash','speedToEmergencyPoint','altOffset','absHeight','visualLanding','min','longitude','slope','coordinates','success','angleTo0_359','ASL_Max','../../services/AccurateLanding','getTelemetryData','instance','params4ValidHomePosition','horizontalSpeedBeforeVisualLand','isCorridor','armed','Utils','defineProperty','hasOwnProperty','41850OfPFWG','validateLandingTypeAccurate','../../../../classes/typings/all.typings','setCurentParam','state','208ggGjBV','===============================','invalid\x20takeoff\x20params\x20for\x20IRLock','validateAccurateLandParams','message','maxErrorDistance','=========\x20route\x20IRLOCK\x20land\x20======================','begin\x20visual\x20land','onboardRHAlt','max','myDate','AccurateLanding','4579224KUXghp','maxErrorDistanceBeforeVisualLand','geometry','landingVisual','isChangedHome','LANDING_TYPE','60WjATvi','!!!!\x20ERROR\x20params\x20for\x20visual/accurate/irlock\x20landing','homePoint','../../../../classes/applicationClasses/utility/geoCalc','39ByDoJN','corridorPoint','ACCURATE','maxVerticalSpeed','altForVisualLanding','CommonMethods4Landing','init','toString','245223oYZWbb','altitudeRange','projConf','lastHome','landingType','length','timeOutGeneral','../../Utils','telemetry.lastHome','toleranceArrive2EmergencyPointInMeters','homeLocation','validateLandingTypeNormal','1596692hLSsTm','UdpServer','operationalAlt','type','latitude','visualLandingTimeoutSecond','AirVehicleManager','accurateToPoint','verticalSpeed','../../services/airVehicle/airVechicleManager','2067000oDmqqB'];a1_0x2f00=function(){return _0x3f4267;};return a1_0x2f00();}function a1_0xfcab(_0x55a023,_0x17bb08){const _0x2f000e=a1_0x2f00();return a1_0xfcab=function(_0xfcabb8,_0x4fde3a){_0xfcabb8=_0xfcabb8-0x142;let _0x57b9b5=_0x2f000e[_0xfcabb8];return _0x57b9b5;},a1_0xfcab(_0x55a023,_0x17bb08);}Object[a1_0x1c6a09(0x193)](exports,a1_0x1c6a09(0x169),{'value':!![]}),exports[a1_0x1c6a09(0x14f)]=void 0x0;const all_typings_1=require(a1_0x1c6a09(0x197)),Utils_1=require(a1_0x1c6a09(0x159)),serverUDP_1=require(a1_0x1c6a09(0x16b)),AccurateLanding_1=require(a1_0x1c6a09(0x18b)),airVechicleManager_1=require(a1_0x1c6a09(0x167)),geoCalc_1=require(a1_0x1c6a09(0x149)),VisualLandManager_1=require(a1_0x1c6a09(0x16c)),_=require(a1_0x1c6a09(0x17f));class CommonMethods4Landing{constructor(){const _0x549207=a1_0x1c6a09;this[_0x549207(0x150)]=_0x41b94c=>{const _0xd6e132=_0x549207;this[_0xd6e132(0x154)]=_0x41b94c;},this[_0x549207(0x19d)]=_0x55cc6e=>{const _0x1152b0=_0x549207,_0x31f44a=_['cloneDeep'](_0x55cc6e);let _0x3db90d=!![];if(this[_0x1152b0(0x154)]){const _0x242a6f=this[_0x1152b0(0x154)][_0x1152b0(0x179)],_0x869464={'landingType':all_typings_1[_0x1152b0(0x145)][_0x1152b0(0x178)],'headingRelativeNorth':0x0,'emergencyPosition':{'latitude':0x0,'longitude':0x0},'type':_0x31f44a[_0x1152b0(0x161)]},_0x4eeae5={'landingType':all_typings_1[_0x1152b0(0x145)][_0x1152b0(0x14c)],'homeLocation':{'latitude':0x0,'longitude':0x0}};if(_0x31f44a[_0x1152b0(0x156)]){if(_0x31f44a[_0x1152b0(0x156)]===all_typings_1['LANDING_TYPE']['ACCURATE'])for(let _0x58146c in _0x4eeae5){!_0x31f44a[_0x1152b0(0x194)](_0x58146c)&&(_0x3db90d=![]);}else{if(_0x31f44a[_0x1152b0(0x156)]===all_typings_1[_0x1152b0(0x145)][_0x1152b0(0x178)])for(let _0xf7cd78 in _0x869464){!_0x31f44a['hasOwnProperty'](_0xf7cd78)&&(_0x3db90d=![]);}}}else _0x3db90d=![];if(_0x3db90d)for(let _0x50aecd in _0x242a6f){!_0x31f44a[_0x1152b0(0x194)](_0x50aecd)&&(_0x31f44a[_0x50aecd]=_0x242a6f[_0x50aecd]);}return console['log'](Utils_1[_0x1152b0(0x192)][_0x1152b0(0x1a4)](new Date()),'is\x20valid\x20data\x20for\x20Accurate\x20Landing',_0x3db90d),_0x3db90d?_0x31f44a:undefined;}},this[_0x549207(0x18e)]=()=>{const _0x50ef76=_0x549207,_0x18ba76=serverUDP_1[_0x50ef76(0x15f)][_0x50ef76(0x18c)](),_0xae25f9=this[_0x50ef76(0x19d)](_0x18ba76[_0x50ef76(0x155)]);if(_0xae25f9){const _0x568a84=_0x18ba76[_0x50ef76(0x17a)]+serverUDP_1[_0x50ef76(0x15f)]['getHomePointDiff']();if(_0x568a84>_0xae25f9['minAltitude']+_0xae25f9[_0x50ef76(0x181)]){const _0x492674={'homeLocation':_0xae25f9[_0x50ef76(0x15c)],'horizontalSpeed':_0xae25f9['horizontalSpeed'],'maxErrorDistance':_0xae25f9['maxErrorDistance'],'minAltitude':_0xae25f9['minAltitude'],'minAltitudeTolerance':_0xae25f9[_0x50ef76(0x17c)],'verticalSpeed':_0xae25f9['verticalSpeed'],'altOffset':_0xae25f9[_0x50ef76(0x181)],'landingType':_0xae25f9[_0x50ef76(0x156)],'emergencyPosition':_0xae25f9[_0x50ef76(0x173)],'altForVisualLanding':_0xae25f9['altForVisualLanding'],'maxVerticalSpeed':_0xae25f9[_0x50ef76(0x14d)],'onboardRHAlt':_0xae25f9[_0x50ef76(0x1a2)],'timeToOnboardRHSec':_0xae25f9[_0x50ef76(0x16a)],'visualLandingTimeoutSecond':_0xae25f9[_0x50ef76(0x163)],'speedToEmergencyPoint':_0xae25f9[_0x50ef76(0x180)],'absHeight':_0xae25f9[_0x50ef76(0x182)],'operationalAlt':_0xae25f9[_0x50ef76(0x160)],'toleranceArrive2EmergencyPointInMeters':_0xae25f9[_0x50ef76(0x15b)],'type':_0xae25f9[_0x50ef76(0x161)]};return console[_0x50ef76(0x170)](_0x50ef76(0x19b)),console[_0x50ef76(0x170)](Utils_1[_0x50ef76(0x192)][_0x50ef76(0x1a4)](new Date()),'params\x20for\x20visual/accurate/irlock\x20landing',_0x492674),console[_0x50ef76(0x170)](_0x50ef76(0x19b)),_0x492674;}else return console[_0x50ef76(0x170)](_0x50ef76(0x19b)),console[_0x50ef76(0x170)](Utils_1[_0x50ef76(0x192)][_0x50ef76(0x1a4)](new Date()),_0x50ef76(0x147)),console[_0x50ef76(0x170)](Utils_1['Utils'][_0x50ef76(0x1a4)](new Date()),'not\x20(heightAbovetakeof\x20>\x20(minAltitude\x20+\x20altOffset)',_0x568a84,'<='+_0xae25f9['minAltitude'],'+',_0xae25f9[_0x50ef76(0x181)]),console['log']('==============================='),undefined;}else return console[_0x50ef76(0x170)](_0x50ef76(0x19b)),console[_0x50ef76(0x170)](Utils_1[_0x50ef76(0x192)][_0x50ef76(0x1a4)](new Date()),_0x50ef76(0x147)),console[_0x50ef76(0x170)](Utils_1[_0x50ef76(0x192)]['myDate'](new Date()),_0x50ef76(0x15a),_0x18ba76[_0x50ef76(0x155)]),console[_0x50ef76(0x170)](_0x50ef76(0x19b)),undefined;},this[_0x549207(0x15d)]=_0x2c7f99=>{let _0x172c97=!![];const _0x43dad2=_0x2c7f99;return _0x172c97;},this[_0x549207(0x196)]=_0x25331c=>{let _0x259cd2=!![];const _0x3f63c9=_0x25331c;return _0x259cd2;},this[_0x549207(0x171)]=_0x3b5c5f=>{let _0x21ded2=!![];const _0x3e209a=_0x3b5c5f;return _0x21ded2;},this[_0x549207(0x17e)]=_0x1fb7e8=>{const _0x5488b9=_0x549207,_0x39e268={'homeData':_0x1fb7e8[_0x5488b9(0x16e)],'landingType':all_typings_1[_0x5488b9(0x145)][_0x5488b9(0x176)],'homeLocation':{'longitude':0x0,'latitude':0x0,'altitude':0x0,'REAL_TAKEOFF_ASL':0x0,'PX_TAKEOFF_ASL':0x0,'REAL_LAND_ASL':0x0,'PX_LAND_ASL':0x0,'isChangedHome':_0x1fb7e8[_0x5488b9(0x15c)]?_0x1fb7e8[_0x5488b9(0x15c)]['isChangedHome']:undefined}};_0x1fb7e8[_0x5488b9(0x14b)]&&_0x1fb7e8['corridorPoint'][_0x5488b9(0x162)]&&_0x1fb7e8[_0x5488b9(0x14b)][_0x5488b9(0x185)]?(_0x39e268[_0x5488b9(0x190)]=!![],_0x39e268[_0x5488b9(0x14b)]=_0x1fb7e8[_0x5488b9(0x14b)]):_0x39e268[_0x5488b9(0x190)]=![];_0x39e268[_0x5488b9(0x182)]=_0x1fb7e8['absHeight'],_0x39e268[_0x5488b9(0x160)]=_0x1fb7e8['absHeight'],_0x39e268['homeLocation']=_0x1fb7e8[_0x5488b9(0x15c)],_0x39e268['landingType']=_0x1fb7e8['landingType'];if(_0x1fb7e8[_0x5488b9(0x16e)]&&_0x1fb7e8['homeData'][_0x5488b9(0x16d)]){_0x39e268[_0x5488b9(0x16e)]['isAGL']=!![];if(_0x1fb7e8['homeData']['altitudeRange']&&_0x1fb7e8['homeData'][_0x5488b9(0x153)]['hasOwnProperty'](_0x5488b9(0x184))&&_0x1fb7e8[_0x5488b9(0x16e)]['altitudeRange']['hasOwnProperty'](_0x5488b9(0x1a3))&&_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x18a)]&&_0x1fb7e8[_0x5488b9(0x16e)]['slope']&&_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x186)]['hasOwnProperty']('min')&&_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x186)][_0x5488b9(0x194)](_0x5488b9(0x1a3))&&_0x1fb7e8[_0x5488b9(0x16e)]['homePoint']&&_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x148)][_0x5488b9(0x142)]&&_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x148)][_0x5488b9(0x142)][_0x5488b9(0x187)]&&Array['isArray'](_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x148)][_0x5488b9(0x142)][_0x5488b9(0x187)])&&_0x1fb7e8['homeData']['homePoint'][_0x5488b9(0x142)][_0x5488b9(0x187)][_0x5488b9(0x157)]===0x3)_0x39e268['homeData'][_0x5488b9(0x153)]=_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x153)],_0x39e268[_0x5488b9(0x16e)][_0x5488b9(0x18a)]=_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x18a)],_0x39e268[_0x5488b9(0x16e)][_0x5488b9(0x186)]=_0x1fb7e8['homeData'][_0x5488b9(0x186)],_0x39e268[_0x5488b9(0x15c)]={'longitude':_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x148)][_0x5488b9(0x142)][_0x5488b9(0x187)][0x0],'latitude':_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x148)]['geometry'][_0x5488b9(0x187)][0x1],'altitude':_0x1fb7e8[_0x5488b9(0x16e)][_0x5488b9(0x148)][_0x5488b9(0x142)][_0x5488b9(0x187)][0x2],'REAL_TAKEOFF_ASL':0x0,'PX_TAKEOFF_ASL':0x0,'REAL_LAND_ASL':0x0,'PX_LAND_ASL':0x0,'isChangedHome':_0x1fb7e8[_0x5488b9(0x15c)]?_0x1fb7e8[_0x5488b9(0x15c)][_0x5488b9(0x144)]:undefined};else{}}return _0x39e268;},this['landingVisual']=()=>{let _0x723a29={'success':![],'message':[]};return new Promise((_0x21ad9a,_0x1f1ced)=>{const _0x4b52d9=a1_0xfcab;console['log'](_0x4b52d9(0x1a0));const _0x2ddc09=serverUDP_1[_0x4b52d9(0x15f)][_0x4b52d9(0x18c)](),_0x382945=_0x2ddc09['lastHome']&&_0x2ddc09[_0x4b52d9(0x155)]['visualLandingTimeoutSecond']?_0x2ddc09[_0x4b52d9(0x155)][_0x4b52d9(0x163)]*0x3e8:this[_0x4b52d9(0x154)]['onBoardNodeJsService'][_0x4b52d9(0x183)][_0x4b52d9(0x158)];if(!_0x2ddc09[_0x4b52d9(0x199)][_0x4b52d9(0x191)])_0x723a29[_0x4b52d9(0x188)]=![],_0x723a29[_0x4b52d9(0x19e)]['push'](new Date()[_0x4b52d9(0x151)](),'disarmed\x20no\x20need\x20to\x20land'),_0x1f1ced(_0x723a29);else{const _0xe44f22=CommonMethods4Landing[_0x4b52d9(0x18e)]();if(_0xe44f22){_0x723a29[_0x4b52d9(0x188)]=!![],_0x723a29[_0x4b52d9(0x19e)][_0x4b52d9(0x175)](Utils_1['Utils'][_0x4b52d9(0x1a4)](new Date()),_0x4b52d9(0x1a1)),_0x21ad9a(_0x723a29);let _0x477c05;AccurateLanding_1[_0x4b52d9(0x1a5)][_0x4b52d9(0x165)](_0x477c05,{'maxErrorDistance':this[_0x4b52d9(0x154)][_0x4b52d9(0x1a7)],'horizontalSpeed':this['projConf'][_0x4b52d9(0x18f)],'latitude':_0xe44f22[_0x4b52d9(0x15c)][_0x4b52d9(0x162)],'longitude':_0xe44f22[_0x4b52d9(0x15c)][_0x4b52d9(0x185)]},_0x565086=>{const _0x220d84=_0x4b52d9;if(_0x565086[_0x220d84(0x188)]){const _0x402100=serverUDP_1[_0x220d84(0x15f)][_0x220d84(0x18c)](),_0x3ba191=geoCalc_1['GeoCalc'][_0x220d84(0x189)](_0x402100['lastHome']['headingRelativeNorth']);airVechicleManager_1[_0x220d84(0x164)]['doHeading'](_0x3ba191,_0x38f2c1=>{const _0x204528=_0x220d84,_0x856df6={'z_min':_0xe44f22[_0x204528(0x14e)],'z_min_min':_0xe44f22['minAltitude']+_0xe44f22['altOffset'],'vz_value':_0xe44f22[_0x204528(0x166)],'max_offset':_0xe44f22[_0x204528(0x19f)],'velocity_xy':_0xe44f22['horizontalSpeed'],'maxTimeForIRLockLanding':_0xe44f22['visualLandingTimeoutSecond'],'type':_0xe44f22['type']};VisualLandManager_1['VisualLandManager'][_0x204528(0x198)](_0xe44f22,_0x856df6),VisualLandManager_1[_0x204528(0x174)]['startLanding'](_0x856df6);});}else _0x723a29['success']=![],_0x723a29[_0x220d84(0x19e)][_0x220d84(0x175)](Utils_1[_0x220d84(0x192)]['myDate'](new Date()),'accurateToPoint\x20not\x20successful'),_0x1f1ced(_0x723a29);});}else _0x723a29[_0x4b52d9(0x188)]=![],_0x723a29[_0x4b52d9(0x19e)]['push'](Utils_1[_0x4b52d9(0x192)][_0x4b52d9(0x1a4)](new Date()),_0x4b52d9(0x19c)),console[_0x4b52d9(0x170)](Utils_1[_0x4b52d9(0x192)][_0x4b52d9(0x1a4)](new Date()),_0x4b52d9(0x19c)),airVechicleManager_1[_0x4b52d9(0x164)][_0x4b52d9(0x17b)](_0x384268=>{const _0x31b702=_0x4b52d9,_0x5e3c06=_0x384268;_0x5e3c06[_0x31b702(0x188)]?_0x21ad9a(_0x5e3c06):_0x1f1ced(_0x5e3c06);});}});};}}exports[a1_0x1c6a09(0x14f)]=CommonMethods4Landing,CommonMethods4Landing[a1_0x1c6a09(0x18d)]=new CommonMethods4Landing(),CommonMethods4Landing[a1_0x1c6a09(0x150)]=CommonMethods4Landing['instance'][a1_0x1c6a09(0x150)],CommonMethods4Landing[a1_0x1c6a09(0x19d)]=CommonMethods4Landing[a1_0x1c6a09(0x18d)][a1_0x1c6a09(0x19d)],CommonMethods4Landing[a1_0x1c6a09(0x18e)]=CommonMethods4Landing[a1_0x1c6a09(0x18d)]['params4ValidHomePosition'],CommonMethods4Landing[a1_0x1c6a09(0x15d)]=CommonMethods4Landing[a1_0x1c6a09(0x18d)][a1_0x1c6a09(0x15d)],CommonMethods4Landing['validateLandingTypeAccurate']=CommonMethods4Landing['instance'][a1_0x1c6a09(0x196)],CommonMethods4Landing[a1_0x1c6a09(0x171)]=CommonMethods4Landing[a1_0x1c6a09(0x18d)][a1_0x1c6a09(0x171)],CommonMethods4Landing['commonLandingValidateAndSetFields']=CommonMethods4Landing[a1_0x1c6a09(0x18d)][a1_0x1c6a09(0x17e)],CommonMethods4Landing[a1_0x1c6a09(0x143)]=CommonMethods4Landing[a1_0x1c6a09(0x18d)][a1_0x1c6a09(0x143)];