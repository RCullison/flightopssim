'use strict';const a11_0x1dc411=a11_0x2ade;(function(_0xfc2dec,_0x7d8550){const _0x5c4295=a11_0x2ade,_0x1e1987=_0xfc2dec();while(!![]){try{const _0x473eca=-parseInt(_0x5c4295(0xde))/0x1*(-parseInt(_0x5c4295(0xe1))/0x2)+parseInt(_0x5c4295(0x73))/0x3*(parseInt(_0x5c4295(0x93))/0x4)+parseInt(_0x5c4295(0x7d))/0x5+-parseInt(_0x5c4295(0xdc))/0x6*(parseInt(_0x5c4295(0xc7))/0x7)+-parseInt(_0x5c4295(0xcd))/0x8+-parseInt(_0x5c4295(0x95))/0x9+parseInt(_0x5c4295(0xdf))/0xa*(parseInt(_0x5c4295(0x96))/0xb);if(_0x473eca===_0x7d8550)break;else _0x1e1987['push'](_0x1e1987['shift']());}catch(_0x614c74){_0x1e1987['push'](_0x1e1987['shift']());}}}(a11_0x3edb,0x43fd3));function a11_0x2ade(_0x3ea8e2,_0x2e21b0){const _0x3edbf1=a11_0x3edb();return a11_0x2ade=function(_0x2ade70,_0x3caeba){_0x2ade70=_0x2ade70-0x6d;let _0x438486=_0x3edbf1[_0x2ade70];return _0x438486;},a11_0x2ade(_0x3ea8e2,_0x2e21b0);}Object[a11_0x1dc411(0xac)](exports,'__esModule',{'value':!![]});const express=require('express'),http=require(a11_0x1dc411(0x82)),bodyParser=require(a11_0x1dc411(0xd7)),socket_io_1=require('./websocket/socket.io'),restManager_1=require(a11_0x1dc411(0xa1)),rootRouteManager_1=require(a11_0x1dc411(0x70)),hotpointRouteManager_1=require('./services/routes/hotpointRouteManager'),gimbalRouteManager_1=require(a11_0x1dc411(0x80)),waypointRouteManager_1=require(a11_0x1dc411(0xc4)),siteRouteManager_1=require(a11_0x1dc411(0xb9)),serverUDP_1=require(a11_0x1dc411(0x6e)),RequestManager_1=require('./RequestManager'),RTH_1=require(a11_0x1dc411(0xdb)),Utils_1=require(a11_0x1dc411(0x79)),webSocketLoggerClient_1=require(a11_0x1dc411(0x74)),clientUDP_1=require(a11_0x1dc411(0xe8)),JoystickControl_1=require(a11_0x1dc411(0xef)),apiManager_1=require(a11_0x1dc411(0xf0)),airVechicleManager_1=require(a11_0x1dc411(0x9b)),AccurateLanding_1=require(a11_0x1dc411(0xe4)),ds_typings_1=require(a11_0x1dc411(0xd8)),CheckingActivity_1=require(a11_0x1dc411(0xbe)),ob_node_types_1=require('../../classes/typings/ob-node-types'),MoveXYStatusManager_1=require(a11_0x1dc411(0xad)),udpServer_1=require(a11_0x1dc411(0x76)),ClientsManager_1=require('./services/Clients/ClientsManager'),socketServer_1=require(a11_0x1dc411(0xa3)),lidarManager_1=require(a11_0x1dc411(0xe3)),CommonMethods4Landing_1=require(a11_0x1dc411(0x8c)),clientUDP4GimbalTele_1=require(a11_0x1dc411(0xd1)),process=require(a11_0x1dc411(0xaf));process['on']('uncaughtException',_0x7fe45f=>{const _0x552857=a11_0x1dc411;console[_0x552857(0xc1)](_0x7fe45f[_0x552857(0x9d)]),console[_0x552857(0x8e)](_0x552857(0xa9));});const services=require(a11_0x1dc411(0xb2)),projConf=require(a11_0x1dc411(0xc0));class Server{constructor(){const _0x22fc40=a11_0x1dc411;this[_0x22fc40(0xc2)]=projConf[_0x22fc40(0xc5)][_0x22fc40(0xc2)],this[_0x22fc40(0xeb)]=_0x50c21b=>{const _0x251185=_0x22fc40,_0x5e3416=new restManager_1[(_0x251185(0xd2))](_0x50c21b);rootRouteManager_1['RootRouteManager']['listen'](_0x5e3416[_0x251185(0x94)]['/'],projConf),hotpointRouteManager_1[_0x251185(0xd4)][_0x251185(0xc6)](_0x5e3416[_0x251185(0x94)][_0x251185(0x8a)]),waypointRouteManager_1['WayPointRouteManager'][_0x251185(0xc6)](_0x5e3416[_0x251185(0x94)][_0x251185(0x9a)]),gimbalRouteManager_1[_0x251185(0x9e)][_0x251185(0xc6)](_0x5e3416[_0x251185(0x94)][_0x251185(0xce)]),siteRouteManager_1['SiteRouteManager']['listen'](_0x5e3416[_0x251185(0x94)]['/site/'],projConf),apiManager_1[_0x251185(0xd5)][_0x251185(0xc6)](_0x5e3416['routers'][_0x251185(0xe7)],projConf),RequestManager_1[_0x251185(0x89)][_0x251185(0xc6)](projConf),airVechicleManager_1['AirVehicleManager'][_0x251185(0xc6)](projConf),AccurateLanding_1[_0x251185(0xb4)][_0x251185(0xc6)](projConf),MoveXYStatusManager_1[_0x251185(0xb5)][_0x251185(0xc6)](projConf),udpServer_1[_0x251185(0x90)][_0x251185(0xbb)](),ClientsManager_1[_0x251185(0xb1)]['init'](),webSocketLoggerClient_1[_0x251185(0x78)][_0x251185(0xa2)](projConf),socketServer_1['SocketServer'][_0x251185(0xbb)](),CommonMethods4Landing_1['CommonMethods4Landing']['init'](projConf),clientUDP4GimbalTele_1['ClientUDP4GimbalTele']['init'](services),new RTH_1['RTH'](projConf),Utils_1['Utils'][_0x251185(0xe2)](projConf[_0x251185(0xea)])[_0x251185(0x7c)](_0x4581fc=>{const _0x4dacf7=_0x251185;_0x4581fc&&serverUDP_1[_0x4dacf7(0xed)][_0x4dacf7(0xa4)](_0x4581fc);})[_0x251185(0x6f)](_0x90a24c=>{const _0x2cbe8e=_0x251185;Utils_1[_0x2cbe8e(0xbd)][_0x2cbe8e(0xc3)](projConf[_0x2cbe8e(0xea)],{});}),Utils_1[_0x251185(0xbd)]['updateProjConf'](projConf),serverUDP_1[_0x251185(0xed)][_0x251185(0xc6)](projConf,this[_0x251185(0xb8)]),clientUDP_1['ClientUDP'][_0x251185(0xc6)](projConf),JoystickControl_1[_0x251185(0xaa)][_0x251185(0xc6)](projConf),lidarManager_1[_0x251185(0x84)][_0x251185(0x7b)]();},this[_0x22fc40(0xdd)]=_0x882a41=>{return http['createServer'](_0x882a41);},this[_0x22fc40(0xc6)]=_0x2c0cdb=>{const _0x22334d=_0x22fc40;_0x2c0cdb[_0x22334d(0xc6)](this[_0x22334d(0xc2)],()=>{const _0x76a5eb=_0x22334d;console[_0x76a5eb(0x8e)](_0x76a5eb(0xa8),this[_0x76a5eb(0xc2)]);});};const _0x5794b4=express();_0x5794b4[_0x22fc40(0xa7)](bodyParser['json']({'limit':_0x22fc40(0xa5)})),_0x5794b4['use'](bodyParser[_0x22fc40(0xd9)]({'extended':![]})),process['on'](_0x22fc40(0x86),(_0x3fc5e0,_0x554bb7)=>{const _0x47275f=_0x22fc40;console['error'](_0x47275f(0x8f),_0x3fc5e0);}),_0x5794b4[_0x22fc40(0xa7)]((_0x41255a,_0x1628e4,_0x100269)=>{const _0x2a2e3f=_0x22fc40;let _0xa89f9=![];const _0x2e9cae=_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0xae))===0x0&&_0x41255a[_0x2a2e3f(0xd3)][_0x2a2e3f(0x92)]===projConf['uniqueKey4RTHRequests']?!![]:![],_0x19ead5=_0x41255a['url']['indexOf'](_0x2a2e3f(0xec))===0x0&&_0x41255a[_0x2a2e3f(0xd3)][_0x2a2e3f(0xca)]===projConf[_0x2a2e3f(0xca)]?!![]:![],_0x5e5872=_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0x9c))===0x0&&_0x41255a[_0x2a2e3f(0xd3)][_0x2a2e3f(0xca)]===projConf[_0x2a2e3f(0xca)]?!![]:![],_0x51c8af=serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0xe5)]()['state'][_0x2a2e3f(0x8d)],_0x327a3a=CheckingActivity_1[_0x2a2e3f(0xc9)][_0x2a2e3f(0xcc)](),_0x5c1f69=serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0xe5)]()[_0x2a2e3f(0xb6)]===ob_node_types_1['CONTROL'][_0x2a2e3f(0xc8)]?![]:!![],_0x2c73b6=serverUDP_1[_0x2a2e3f(0xed)]['getTelemetryData']()[_0x2a2e3f(0xee)],_0x313343=!serverUDP_1[_0x2a2e3f(0xed)]['getTelemetryData']()[_0x2a2e3f(0xd6)][_0x2a2e3f(0x8d)]&&_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)]('/takeoff')===0x0&&(!projConf['isProd']||serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0xb0)]()===ob_node_types_1[_0x2a2e3f(0xe6)][_0x2a2e3f(0x7f)]&&serverUDP_1['UdpServer'][_0x2a2e3f(0x77)]===ob_node_types_1[_0x2a2e3f(0xb3)][_0x2a2e3f(0xab)]||serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0x77)]===ob_node_types_1[_0x2a2e3f(0xb3)][_0x2a2e3f(0xb7)]&&serverUDP_1[_0x2a2e3f(0xed)]['getFlightMode']()===ob_node_types_1[_0x2a2e3f(0x71)][_0x2a2e3f(0xba)]),_0x4afbe8=_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)]('/gimbal/set')===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0x9f))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0xa6))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)]('/api/stowGimbal')===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0x91))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)]('/api/stowGimbal')===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0xbf))===0x0||_0x41255a['url'][_0x2a2e3f(0x85)](_0x2a2e3f(0x7a))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0x6d))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0xcf))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0x81))===0x0||_0x41255a[_0x2a2e3f(0x72)][_0x2a2e3f(0x85)](_0x2a2e3f(0x97))===0x0||!projConf['isProd']&&_0x41255a['url'][_0x2a2e3f(0x85)](_0x2a2e3f(0xcb))===0x0?!![]:![],_0x30e77b=_0x41255a[_0x2a2e3f(0xd3)][_0x2a2e3f(0xd0)](_0x2a2e3f(0x92))&&_0x41255a[_0x2a2e3f(0xd3)][_0x2a2e3f(0x92)]===projConf['uniqueKey4RTHRequests']?!![]:![],_0x40b405=_0x41255a[_0x2a2e3f(0xd3)][_0x2a2e3f(0xd0)](_0x2a2e3f(0xca))&&_0x41255a[_0x2a2e3f(0xd3)]['uniqueKey4JoystickRequests']===projConf['uniqueKey4JoystickRequests']?!![]:![];if(_0x4afbe8||_0x313343)_0xa89f9=!![];else{if(_0x51c8af){if(_0x327a3a&&_0x5c1f69&&_0x40b405)_0xa89f9=!![];else{if(_0x327a3a&&_0x5c1f69&&_0x2e9cae)_0xa89f9=!![];else{if(_0x2c73b6===ds_typings_1[_0x2a2e3f(0x99)]['onBoard']&&_0x30e77b&&_0x327a3a)_0xa89f9=!![];else{if(_0x327a3a&&_0x5c1f69&&_0x2c73b6===ds_typings_1[_0x2a2e3f(0x99)][_0x2a2e3f(0xda)]&&!_0x30e77b)_0xa89f9=!![];else{if(_0x327a3a&&_0x5c1f69&&_0x19ead5)_0xa89f9=!![];else _0x327a3a&&_0x5c1f69&&_0x5e5872&&(_0xa89f9=!![]);}}}}}}if(!_0xa89f9)_0x1628e4[_0x2a2e3f(0x87)]({'success':![],'message':['disallow\x20send\x20requests\x20owner\x20\x20\x20'+serverUDP_1['UdpServer'][_0x2a2e3f(0xe5)]()['owner'],_0x2a2e3f(0xe0)+serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0x88)](),'control\x20'+_0x5c1f69,'RC_Connection\x20'+serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0xe5)]()[_0x2a2e3f(0x7e)],_0x2a2e3f(0x8b)+_0x30e77b,_0x2a2e3f(0xa0)+_0x40b405,'isAllowRC\x20'+_0x327a3a,_0x2a2e3f(0xbc),_0x41255a[_0x2a2e3f(0x72)]]}),console[_0x2a2e3f(0x8e)]('disallow\x20send\x20requests\x20owner\x20\x20\x20'+serverUDP_1[_0x2a2e3f(0xed)][_0x2a2e3f(0xe5)]()['owner'],_0x2a2e3f(0xe0)+serverUDP_1['UdpServer']['getFlightModeEnum'](),'control\x20'+_0x5c1f69,_0x2a2e3f(0x98)+serverUDP_1['UdpServer']['getTelemetryData']()['connectionRC'],_0x2a2e3f(0x8b)+_0x30e77b,_0x2a2e3f(0xa0)+_0x40b405,_0x2a2e3f(0x83)+_0x327a3a,_0x2a2e3f(0xbc),_0x41255a[_0x2a2e3f(0x72)]);else{if(_0x41255a['url'][_0x2a2e3f(0x85)](_0x2a2e3f(0x91))===-0x1){}_0x100269();}});const _0x5daece=this[_0x22fc40(0xdd)](_0x5794b4);this['socketIO']=new socket_io_1[(_0x22fc40(0xe9))](projConf,_0x5daece),this[_0x22fc40(0xc6)](_0x5daece),this['runListenFunctions'](_0x5794b4);}static['bootstrap'](){return new Server();}}function a11_0x3edb(){const _0x214e68=['urlencoded','droneService','./services/RTH','12XwzGtf','createServer','22688rumfkP','278330TqaKno','flightMode:\x20','32bpTYeP','readJsonFile','./services/lidar/lidarManager','./services/AccurateLanding','getTelemetryData','FLIGHT_MODE_ARDUPILOT','/api/','./services/TCPUDP/clientUDP','SocketIo','fileName','runListenFunctions','/api/queryToSetOwner','UdpServer','owner','./services/JoystickControl','./services/api/apiManager','/api/stopVideo','./services/TCPUDP/serverUDP','catch','./services/routes/rootRouteManager','FLIGHT_MODE_PX4','url','225UpLFUs','./logger/webSocketLoggerClient','bootstrap','./services/TCPUDP/udpServer_','copterType','SocketLoggerClient','./Utils','/api/startVideo','init','then','870655gRXvJE','connectionRC','MODE_AUTO','./services/routes/gimbalRouteManager','/api/moveGimbal','http','isAllowRC\x20','LidarManager','indexOf','unhandledRejection','json','getFlightModeEnum','RequestManager','/hotPoint/','isU_A_NOT_RTHService\x20','./Managers/LandingManagers/CommonMethods4Landing','armed','log','Unhandled\x20Rejection\x20at\x20Promise:','UdpServer_','/site/set','uniqueKey4RTHRequests','14180xBnJIY','routers','4491342yTkSNU','187GXPxwz','/api/refreshSite','RC_Connection\x20','OWNER','/wayPoint/','./services/airVehicle/airVechicleManager','/api/queryToOffOwner','stack','GimbalRouteManager','/data','isU_A_NOT_joystick\x20','./applicationServices/restConnections/restManager','updateProjConf','./applicationServices/websocket/socketServer','setLastHome','1mb','/telemetryData','use','Running\x20onBoardNode\x20server\x20on\x20port\x20','Node\x20NOT\x20Exiting...','JoystickControl','Ardupilot','defineProperty','./services/moveXY/MoveXYStatusManager','/changeOwner','process','getFlightMode','ClientsManager','./../../../../config/services.json','COPTER_TYPE','AccurateLanding','MoveXYStatusManager','control','PX4','socketIO','./services/routes/siteRouteManager','POSCTL','setServer','reqURL','Utils','./services/CheckingActivity','/api/doPhoto','./../../../../projConf.json','error','port','save2File','./services/routes/waypointRouteManager','onBoardNodeJsService','listen','271621slEQIZ','pilot','CheckingActivity','uniqueKey4JoystickRequests','/api/testEnergy','isAllowRCMode','3368384LZwIto','/gimbal/','/api/changeCameraMode','hasOwnProperty','./services/TCPUDP/UDP_subscribe/clientUDP4GimbalTele','RestManager','query','HotpointRouteManager','ApiManager','state','body-parser','../../classes/typings/ds.typings'];a11_0x3edb=function(){return _0x214e68;};return a11_0x3edb();}Server[a11_0x1dc411(0x75)]();