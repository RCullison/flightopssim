'use strict';const a31_0x766864=a31_0x4fa9;(function(_0x346bdd,_0x3e29e0){const _0x114ee6=a31_0x4fa9,_0x37d308=_0x346bdd();while(!![]){try{const _0x4c7788=-parseInt(_0x114ee6(0x158))/0x1*(-parseInt(_0x114ee6(0x132))/0x2)+-parseInt(_0x114ee6(0x168))/0x3+-parseInt(_0x114ee6(0x134))/0x4*(parseInt(_0x114ee6(0x15e))/0x5)+-parseInt(_0x114ee6(0x125))/0x6*(parseInt(_0x114ee6(0x149))/0x7)+parseInt(_0x114ee6(0x154))/0x8*(parseInt(_0x114ee6(0x157))/0x9)+parseInt(_0x114ee6(0x163))/0xa*(parseInt(_0x114ee6(0x14e))/0xb)+parseInt(_0x114ee6(0x13c))/0xc;if(_0x4c7788===_0x3e29e0)break;else _0x37d308['push'](_0x37d308['shift']());}catch(_0x4adcec){_0x37d308['push'](_0x37d308['shift']());}}}(a31_0x4955,0x6168e));Object[a31_0x766864(0x15a)](exports,a31_0x766864(0x13f),{'value':!![]}),exports[a31_0x766864(0x12d)]=void 0x0;const all_typings_1=require('../../../classes/typings/all.typings'),Utils_1=require(a31_0x766864(0x161)),airVechicleManager_1=require(a31_0x766864(0x16b));function a31_0x4fa9(_0x20a4e1,_0x75d4fd){const _0x495540=a31_0x4955();return a31_0x4fa9=function(_0x4fa99c,_0x14f8e2){_0x4fa99c=_0x4fa99c-0x125;let _0x4d4a8a=_0x495540[_0x4fa99c];return _0x4d4a8a;},a31_0x4fa9(_0x20a4e1,_0x75d4fd);}function a31_0x4955(){const _0x26928c=['../Utils','length','1280700gEXrkw','\x20sec','push','message','|got\x20req\x20wp\x20setSpeed\x20response\x20|\x20','973962PdTniR','clearWaiting','indexOfPoint','./airVehicle/airVechicleManager','intervalWaitingAllPoints','latitude','startWaiting','POINT_STATE','25206QmwVCd','height_above_takeoff','forEach','hasOwnProperty','getStates','alt','stop','now','WaitRouteManager','longitude','point_condition','listen','AirVehicleManager','320798QfOjTK','stopWaitingALL','8bMvubs','StartWaiting','log','intervals','keys','abs','arrPoints','date','9873228qDvrar','getStatusPoints','GeoPoint3dLong2Short','__esModule','getDistanceInMeter','getArrPoints','StoppedByTimeOut','send_handler2RequestService','indexOf','instance','lastUpdateStatus','states','delta\x20time','1085ZbFQds','toISOString','gps_position','start','ArrivedToPoint','11TYxwbe','timeout\x20waiting\x20arrive\x20point\x20','stringify','lon','lat','fillCurrentState','40792FKMEUY','curr\x20point','Utils','513cfcHaV','1zKmArX','distance','defineProperty','status','setProjConf','-----interval\x20waiting------------------','67705VmyhyJ','velocity','state'];a31_0x4955=function(){return _0x26928c;};return a31_0x4955();}class WaitRouteManager{constructor(){const _0x535883=a31_0x766864;this[_0x535883(0x147)]={},this[_0x535883(0x13a)]=[],this[_0x535883(0x137)]={},this[_0x535883(0x15c)]=_0x5f330a=>{this['projConf']=_0x5f330a;},this['getStates']=()=>{return this['states'];},this[_0x535883(0x141)]=()=>{const _0x20ce36=_0x535883;return this[_0x20ce36(0x13a)];},this[_0x535883(0x14c)]=_0x156e12=>{const _0x2612ce=_0x535883;this['clearWaiting'](),this[_0x2612ce(0x13a)]=_0x156e12;if(this['arrPoints']['length']>0x0){this[_0x2612ce(0x16e)](0x0);let _0x215008=0x0;this[_0x2612ce(0x16c)]=setInterval(()=>{const _0x360ddb=_0x2612ce;if(this['states'][_0x360ddb(0x128)](_0x215008))this[_0x360ddb(0x147)][_0x215008][all_typings_1[_0x360ddb(0x16f)][_0x360ddb(0x135)]]&&this[_0x360ddb(0x147)][_0x215008][all_typings_1[_0x360ddb(0x16f)][_0x360ddb(0x142)]]&&(this[_0x360ddb(0x169)](),clearInterval(this[_0x360ddb(0x16c)])),this['states'][_0x215008][all_typings_1[_0x360ddb(0x16f)][_0x360ddb(0x135)]]&&this[_0x360ddb(0x147)][_0x215008][all_typings_1[_0x360ddb(0x16f)][_0x360ddb(0x14d)]]&&(_0x215008==this['arrPoints'][_0x360ddb(0x162)]-0x1?clearInterval(this[_0x360ddb(0x16c)]):(_0x215008=_0x215008+0x1,this['startWaiting'](_0x215008)));else{}},0x64);}else{}},this[_0x535883(0x169)]=()=>{const _0x3f1a78=_0x535883;this[_0x3f1a78(0x147)]={},this[_0x3f1a78(0x13a)]=[],this['stopWaitingALL']();},this[_0x535883(0x16e)]=_0x4b9891=>{const _0x1c90a9=_0x535883;if(_0x4b9891>0x0)for(let _0x9ee37a=0x0;_0x9ee37a<_0x4b9891-0x1;_0x9ee37a++){clearInterval(this[_0x1c90a9(0x137)][_0x9ee37a]);}const _0xf5f466={'success':![],'message':[]},_0xc1d7a=0xa,_0x2b8e03=0x2,_0x321489=0xe10,_0x55733f=Date[_0x1c90a9(0x12c)]();this['fillCurrentState'](_0x4b9891,all_typings_1[_0x1c90a9(0x16f)][_0x1c90a9(0x135)]),this['intervals'][_0x4b9891]=setInterval(()=>{const _0x33cb78=_0x1c90a9,_0x4d8436=airVechicleManager_1['AirVehicleManager']['getTelemetry4FCS'](),_0x5daf8d=Utils_1['Utils'][_0x33cb78(0x140)]([_0x4d8436[_0x33cb78(0x14b)][_0x33cb78(0x12e)],_0x4d8436[_0x33cb78(0x14b)][_0x33cb78(0x16d)]],[this[_0x33cb78(0x13a)][_0x4b9891][_0x33cb78(0x151)],this[_0x33cb78(0x13a)][_0x4b9891][_0x33cb78(0x152)]]);console['log'](new Date(),_0x33cb78(0x15d)),console[_0x33cb78(0x136)](_0x33cb78(0x159),_0x5daf8d),console['log']('cur\x20pos',JSON[_0x33cb78(0x150)](_0x4d8436['gps_position'])),console['log']('index\x20curr\x20point',_0x4b9891),console['log'](_0x33cb78(0x155),JSON['stringify'](this[_0x33cb78(0x13a)][_0x4b9891]));if(_0x5daf8d<_0xc1d7a&&Math[_0x33cb78(0x139)](_0x4d8436[_0x33cb78(0x126)]-this['arrPoints'][_0x4b9891][_0x33cb78(0x12a)])<_0x2b8e03){_0xf5f466['success']=!![],this[_0x33cb78(0x153)](_0x4b9891,all_typings_1['POINT_STATE']['ArrivedToPoint']);const _0x3e6537=this['arrPoints'][_0x4b9891][_0x33cb78(0x15f)];Utils_1['Utils'][_0x33cb78(0x143)]('waypointUpdateVelocity',{'velocity':_0x3e6537},_0x29c7c0=>{const _0x37ef43=_0x33cb78;console['log'](new Date()[_0x37ef43(0x14a)](),_0x37ef43(0x167),JSON[_0x37ef43(0x150)](_0x29c7c0));}),clearInterval(this['intervals'][_0x4b9891]),this[_0x33cb78(0x137)][_0x4b9891]=undefined;}const _0x2d7c9f=Date['now']()-_0x55733f;console[_0x33cb78(0x136)](_0x33cb78(0x148),_0x2d7c9f),_0x2d7c9f>_0x321489*0x3e8&&(_0xf5f466[_0x33cb78(0x166)][_0x33cb78(0x165)](_0x33cb78(0x14f)+JSON[_0x33cb78(0x150)](this[_0x33cb78(0x13a)][_0x4b9891])+'\x20'+_0x2d7c9f/0x3e8+_0x33cb78(0x164)),this[_0x33cb78(0x153)](_0x4b9891,all_typings_1['POINT_STATE'][_0x33cb78(0x142)]),this[_0x33cb78(0x137)][_0x4b9891]=undefined,clearInterval(this['intervals'][_0x4b9891]),console['log']('>maxTimeOutWaiting',_0x321489));},0x12c);},this[_0x535883(0x133)]=()=>{const _0x4bbc74=_0x535883;for(let _0x41b908 in this[_0x4bbc74(0x137)]){clearInterval(this[_0x4bbc74(0x137)][_0x41b908]),this[_0x4bbc74(0x137)][_0x41b908]=undefined;}clearInterval(this[_0x4bbc74(0x16c)]),this[_0x4bbc74(0x16c)]=undefined;},this[_0x535883(0x153)]=(_0x59b080,_0x2736a6)=>{const _0x2cbe04=_0x535883,_0x3f9bce=airVechicleManager_1[_0x2cbe04(0x131)]['getTelemetry4FCS'](),_0xc82e46=Utils_1[_0x2cbe04(0x156)][_0x2cbe04(0x13e)](_0x3f9bce[_0x2cbe04(0x14b)]),_0x16f2dc=Utils_1[_0x2cbe04(0x156)]['pyphagor'](_0x3f9bce[_0x2cbe04(0x15f)]['x'],_0x3f9bce[_0x2cbe04(0x15f)]['y']),_0x45eaf0={'reachedPoint':_0xc82e46,'velocityVertical':_0x3f9bce['velocity']['z'],'velocityHorizontal':_0x16f2dc};!this[_0x2cbe04(0x147)][_0x59b080]&&(this[_0x2cbe04(0x147)][_0x59b080]={}),!this['states'][_0x59b080][_0x2736a6]&&(this['states'][_0x59b080][_0x2736a6]={}),this[_0x2cbe04(0x147)][_0x59b080][_0x2736a6][Date[_0x2cbe04(0x12c)]()]=_0x45eaf0,console[_0x2cbe04(0x136)](new Date(),'----------currPointState-------------'),console['log'](_0x2cbe04(0x12f),_0x45eaf0),console['log'](_0x2cbe04(0x12f),_0x45eaf0),console[_0x2cbe04(0x136)]('point_condition',_0x45eaf0),console[_0x2cbe04(0x136)](_0x2cbe04(0x16a),_0x59b080,_0x2cbe04(0x160),_0x2736a6,_0x2cbe04(0x13b),Date[_0x2cbe04(0x12c)]());},this[_0x535883(0x13d)]=()=>{const _0x564ab0=_0x535883,_0x58db37=[];return this['arrPoints'][_0x564ab0(0x127)]((_0x570a33,_0x1e3883)=>{const _0x163313=_0x564ab0,_0x297374={'lat':_0x570a33[_0x163313(0x152)],'lon':_0x570a33[_0x163313(0x151)],'alt':_0x570a33[_0x163313(0x12a)],'lastUpdateStatus':0x0,'status':all_typings_1[_0x163313(0x16f)]['None']};if(this[_0x163313(0x147)]['hasOwnProperty'](_0x1e3883)){const _0x271dd5=Object[_0x163313(0x138)](this['states'][_0x1e3883]);_0x271dd5[_0x163313(0x144)](all_typings_1[_0x163313(0x16f)]['StartWaiting'])>-0x1&&(_0x297374[_0x163313(0x15b)]=all_typings_1[_0x163313(0x16f)][_0x163313(0x135)],_0x297374[_0x163313(0x146)]=this[_0x163313(0x147)][_0x1e3883][all_typings_1['POINT_STATE']['StartWaiting']]),_0x271dd5[_0x163313(0x144)](all_typings_1['POINT_STATE']['ArrivedToPoint'])>-0x1&&(_0x297374[_0x163313(0x15b)]=all_typings_1['POINT_STATE'][_0x163313(0x14d)],_0x297374['lastUpdateStatus']=this[_0x163313(0x147)][_0x1e3883][all_typings_1[_0x163313(0x16f)][_0x163313(0x14d)]]),_0x271dd5['indexOf'](all_typings_1['POINT_STATE']['StoppedByTimeOut'])>-0x1&&(_0x297374[_0x163313(0x15b)]=all_typings_1[_0x163313(0x16f)][_0x163313(0x142)],_0x297374[_0x163313(0x146)]=this[_0x163313(0x147)][_0x1e3883][all_typings_1[_0x163313(0x16f)][_0x163313(0x142)]]);}_0x58db37[_0x163313(0x165)](_0x297374);}),_0x58db37;};}}exports['WaitRouteManager']=WaitRouteManager,WaitRouteManager[a31_0x766864(0x145)]=new WaitRouteManager(),WaitRouteManager[a31_0x766864(0x130)]=WaitRouteManager[a31_0x766864(0x145)]['setProjConf'],WaitRouteManager[a31_0x766864(0x14c)]=WaitRouteManager[a31_0x766864(0x145)][a31_0x766864(0x14c)],WaitRouteManager[a31_0x766864(0x12b)]=WaitRouteManager[a31_0x766864(0x145)][a31_0x766864(0x133)],WaitRouteManager[a31_0x766864(0x169)]=WaitRouteManager[a31_0x766864(0x145)][a31_0x766864(0x169)],WaitRouteManager[a31_0x766864(0x129)]=WaitRouteManager['instance'][a31_0x766864(0x129)],WaitRouteManager[a31_0x766864(0x141)]=WaitRouteManager[a31_0x766864(0x145)][a31_0x766864(0x141)],WaitRouteManager[a31_0x766864(0x13d)]=WaitRouteManager['instance'][a31_0x766864(0x13d)];