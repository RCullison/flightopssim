'use strict';const a10_0x540992=a10_0x48d7;function a10_0x48d7(_0x5cb34c,_0x24059f){const _0x492443=a10_0x4924();return a10_0x48d7=function(_0x48d770,_0x48b7af){_0x48d770=_0x48d770-0x1e9;let _0x4de68a=_0x492443[_0x48d770];return _0x4de68a;},a10_0x48d7(_0x5cb34c,_0x24059f);}(function(_0x4de418,_0x47ca38){const _0x46723f=a10_0x48d7,_0x76cd3a=_0x4de418();while(!![]){try{const _0x302505=parseInt(_0x46723f(0x205))/0x1*(-parseInt(_0x46723f(0x234))/0x2)+-parseInt(_0x46723f(0x1f5))/0x3+parseInt(_0x46723f(0x233))/0x4+parseInt(_0x46723f(0x22a))/0x5+parseInt(_0x46723f(0x23d))/0x6+parseInt(_0x46723f(0x231))/0x7*(-parseInt(_0x46723f(0x22b))/0x8)+parseInt(_0x46723f(0x235))/0x9;if(_0x302505===_0x47ca38)break;else _0x76cd3a['push'](_0x76cd3a['shift']());}catch(_0x25145f){_0x76cd3a['push'](_0x76cd3a['shift']());}}}(a10_0x4924,0x1c95d));Object[a10_0x540992(0x210)](exports,a10_0x540992(0x221),{'value':!![]}),exports[a10_0x540992(0x1fb)]=void 0x0;const convertation_1=require(a10_0x540992(0x20a)),geoCalc_1=require(a10_0x540992(0x220)),all_typings_1=require(a10_0x540992(0x1eb)),telemetryManager_1=require(a10_0x540992(0x216)),commandManager_1=require(a10_0x540992(0x20d));class MoveToLocation{constructor(){const _0x26182f=a10_0x540992;this[_0x26182f(0x23f)]=all_typings_1[_0x26182f(0x242)][_0x26182f(0x1fb)],this[_0x26182f(0x1fe)]={},this[_0x26182f(0x238)]={},this['status']=all_typings_1[_0x26182f(0x1ed)][_0x26182f(0x1ff)],this[_0x26182f(0x245)]={'distanceToTarget':0x0,'deltaHeight':0x0},this[_0x26182f(0x227)]=(_0x49a7c9,_0x17df15)=>{const _0x1eacc5=_0x26182f;this[_0x1eacc5(0x1fe)]=_0x49a7c9,this[_0x1eacc5(0x238)]=_0x17df15;},this[_0x26182f(0x21c)]=_0x530adf=>{const _0x59fdea=_0x26182f,_0x3fdaa9={'success':![],'data':all_typings_1[_0x59fdea(0x1ed)][_0x59fdea(0x1ff)]};if(telemetryManager_1['TelemetryManager'][_0x59fdea(0x212)]())try{this[_0x59fdea(0x224)](_0x530adf),this[_0x59fdea(0x23b)](),this['status']=all_typings_1[_0x59fdea(0x1ed)]['run'],_0x3fdaa9[_0x59fdea(0x22c)]=!![],_0x3fdaa9[_0x59fdea(0x1f0)]=this['status'];}catch(_0x1eeab0){console[_0x59fdea(0x241)](_0x1eeab0);}return _0x3fdaa9;},this['stop']=()=>{const _0x2e8b60=_0x26182f,_0x3c4bdd={'success':![],'data':all_typings_1[_0x2e8b60(0x1ed)][_0x2e8b60(0x1ff)]};return this['stopNow'](),_0x3c4bdd['success']=!![],_0x3c4bdd[_0x2e8b60(0x1f0)]=this[_0x2e8b60(0x1f3)],_0x3c4bdd[_0x2e8b60(0x22f)]='The\x20MoveToLocation\x20algorithm\x20is\x20stopped',_0x3c4bdd;},this[_0x26182f(0x1f9)]=()=>{const _0x1bd374=_0x26182f;this[_0x1bd374(0x20e)][_0x1bd374(0x237)](0x0),this[_0x1bd374(0x20e)][_0x1bd374(0x215)](0x0),this[_0x1bd374(0x20e)]['setFZ'](0x0),this['stopMoveMethod'](),this[_0x1bd374(0x1f3)]=all_typings_1[_0x1bd374(0x1ed)][_0x1bd374(0x1ff)],commandManager_1[_0x1bd374(0x1fc)][_0x1bd374(0x200)]({'algorithmName':all_typings_1[_0x1bd374(0x242)]['MoveToLocation'],'status':this[_0x1bd374(0x1f3)]}),console['log'](new Date()['toISOString'](),'MoveToLocation\x20status\x20is\x20'+this['status']),commandManager_1[_0x1bd374(0x1fc)][_0x1bd374(0x244)]();},this[_0x26182f(0x1f2)]=()=>{const _0x4670f4=_0x26182f;return this[_0x4670f4(0x1f3)];},this['setParams']=_0x132341=>{const _0x3e40c5=_0x26182f;_0x132341[_0x3e40c5(0x219)][_0x3e40c5(0x240)]=_0x132341[_0x3e40c5(0x219)][_0x3e40c5(0x240)]||this['defaultConfig'][_0x3e40c5(0x1f4)],_0x132341['requestParameters'][_0x3e40c5(0x21e)]=convertation_1[_0x3e40c5(0x246)][_0x3e40c5(0x207)](_0x132341['requestParameters'][_0x3e40c5(0x201)]),this[_0x3e40c5(0x230)]=_0x132341[_0x3e40c5(0x219)],this[_0x3e40c5(0x20e)]=_0x132341[_0x3e40c5(0x20e)];},this['startMoveMethod']=()=>{const _0x516a95=_0x26182f;console['log'](new Date()['toISOString'](),_0x516a95(0x204)),this[_0x516a95(0x21f)](),this[_0x516a95(0x232)]=this['algorithmInterval']();},this[_0x26182f(0x21f)]=()=>{const _0x33d53b=_0x26182f;if(this[_0x33d53b(0x232)])try{clearInterval(this[_0x33d53b(0x232)]),this[_0x33d53b(0x232)]=undefined;}catch(_0x2546d0){}},this['algorithmInterval']=()=>{return setInterval(()=>{const _0x2747de=a10_0x48d7,_0x55a5e9=this[_0x2747de(0x223)]();if(_0x55a5e9){const _0x1fb766=this[_0x2747de(0x225)]();if(this[_0x2747de(0x230)]&&this[_0x2747de(0x230)]['point']&&Number[_0x2747de(0x209)](this[_0x2747de(0x230)][_0x2747de(0x21e)][0x2])){const _0x20f8ae=this[_0x2747de(0x20b)]();this['remote'][_0x2747de(0x206)](_0x20f8ae);}this[_0x2747de(0x20e)][_0x2747de(0x237)](_0x1fb766['x']),this['remote'][_0x2747de(0x215)](_0x1fb766['y']);}else this[_0x2747de(0x1f9)]();},this['defaultConfig']['SEND_COMMAND_INTERVAL']);},this[_0x26182f(0x223)]=()=>{const _0x41b5af=_0x26182f;let _0x3f9ff1=![];const _0x25e3a7=telemetryManager_1['TelemetryManager']['getTelemetry'](),_0x2a65ec=convertation_1['Convertation'][_0x41b5af(0x1f7)](_0x25e3a7['gps_position']),_0x4d3316=geoCalc_1[_0x41b5af(0x1ee)][_0x41b5af(0x236)](_0x2a65ec,this[_0x41b5af(0x230)][_0x41b5af(0x21e)]);this['serviceObject']['distanceToTarget']=_0x4d3316;let _0x5c6083=0x0;return this[_0x41b5af(0x230)]&&this[_0x41b5af(0x230)][_0x41b5af(0x21e)]&&Number[_0x41b5af(0x209)](this[_0x41b5af(0x230)]['point'][0x2])?(_0x5c6083=this['moveToLocationParams'][_0x41b5af(0x218)]-_0x25e3a7[_0x41b5af(0x1ec)],this[_0x41b5af(0x245)][_0x41b5af(0x213)]=_0x5c6083):this['serviceObject'][_0x41b5af(0x213)]=0x0,_0x4d3316>this[_0x41b5af(0x238)][_0x41b5af(0x22e)]||Math['abs'](_0x5c6083)>this['defaultConfig'][_0x41b5af(0x21a)]?_0x3f9ff1=!![]:_0x3f9ff1=![],_0x3f9ff1;},this[_0x26182f(0x225)]=()=>{const _0x4871a4=_0x26182f;let _0x2fb2ec={'x':0x0,'y':0x0};const _0x41287b=telemetryManager_1[_0x4871a4(0x226)]['getTelemetry'](),_0x5568b1=convertation_1[_0x4871a4(0x246)][_0x4871a4(0x1f7)](_0x41287b[_0x4871a4(0x203)]),_0x522b9d=geoCalc_1[_0x4871a4(0x1ee)][_0x4871a4(0x236)](_0x5568b1,this['moveToLocationParams']['point']);return _0x522b9d>this[_0x4871a4(0x238)][_0x4871a4(0x1f4)]*this[_0x4871a4(0x238)][_0x4871a4(0x20f)]*0x2||_0x41287b[_0x4871a4(0x214)]<this[_0x4871a4(0x238)][_0x4871a4(0x1f4)]/(this['defaultConfig'][_0x4871a4(0x20f)]*0x2)?_0x2fb2ec=this['computeLongForces']():_0x2fb2ec=this['computeShirtForces'](this[_0x4871a4(0x238)]['EXTRAPOLATION_TIME']),_0x2fb2ec;},this['computeLongForces']=()=>{const _0x2aec39=_0x26182f,_0x2150f1={'x':0x0,'y':0x0},_0x4b60f2=telemetryManager_1[_0x2aec39(0x226)][_0x2aec39(0x239)](),_0x4e069f=convertation_1['Convertation'][_0x2aec39(0x22d)](_0x4b60f2['gps_position']),_0x569e64=geoCalc_1[_0x2aec39(0x1ee)][_0x2aec39(0x211)](_0x4e069f,this[_0x2aec39(0x230)]['geoLocation']),_0x281d02=geoCalc_1['GeoCalc']['angleTo0_360'](_0x569e64),_0xe9b611=convertation_1[_0x2aec39(0x246)][_0x2aec39(0x1f7)](_0x4b60f2[_0x2aec39(0x203)]),_0x90c764=geoCalc_1[_0x2aec39(0x1ee)][_0x2aec39(0x236)](_0xe9b611,this[_0x2aec39(0x230)]['point']),_0x402c79=_0x90c764/this['defaultConfig'][_0x2aec39(0x228)];let _0x2f65ee=Math[_0x2aec39(0x229)](0x1,Math['pow'](_0x402c79,0x2));return _0x4b60f2['velocityScalar']<0x1&&(_0x2f65ee=Math[_0x2aec39(0x229)](0x1,_0x2f65ee*0x2)),_0x2150f1['x']=_0x2f65ee*this['defaultConfig'][_0x2aec39(0x1f4)]*Math[_0x2aec39(0x23c)](convertation_1[_0x2aec39(0x246)]['deg_to_rad'](_0x281d02)),_0x2150f1['y']=_0x2f65ee*this[_0x2aec39(0x238)][_0x2aec39(0x1f4)]*Math[_0x2aec39(0x1e9)](convertation_1[_0x2aec39(0x246)][_0x2aec39(0x222)](_0x281d02)),_0x2150f1;},this[_0x26182f(0x20c)]=_0x1450e1=>{const _0x9e08eb=_0x26182f,_0x21c876={'x':0x0,'y':0x0},_0x2c2101=telemetryManager_1[_0x9e08eb(0x226)][_0x9e08eb(0x239)](),_0x132b7a=this[_0x9e08eb(0x1fa)](_0x1450e1),_0x2f57ff=convertation_1['Convertation'][_0x9e08eb(0x217)](_0x132b7a),_0xc21971=geoCalc_1['GeoCalc'][_0x9e08eb(0x211)](_0x2f57ff,this[_0x9e08eb(0x230)][_0x9e08eb(0x201)]),_0x48f257=geoCalc_1['GeoCalc'][_0x9e08eb(0x1f6)](_0xc21971),_0x92f8e7=convertation_1[_0x9e08eb(0x246)]['GEOPOINT3D_to_POINT3D'](_0x2c2101[_0x9e08eb(0x203)]),_0x11d9f2=geoCalc_1[_0x9e08eb(0x1ee)][_0x9e08eb(0x236)](_0x132b7a,this[_0x9e08eb(0x230)][_0x9e08eb(0x21e)]),_0x263953=geoCalc_1[_0x9e08eb(0x1ee)][_0x9e08eb(0x236)](_0x132b7a,this[_0x9e08eb(0x230)]['point']),_0xc10588=_0x263953/this['defaultConfig'][_0x9e08eb(0x228)];let _0x2a5ffa=Math[_0x9e08eb(0x229)](0x1,Math[_0x9e08eb(0x208)](_0xc10588,0x2));return _0x2c2101[_0x9e08eb(0x214)]<0x1&&(_0x2a5ffa=Math[_0x9e08eb(0x229)](0x1,_0x2a5ffa*0x2)),_0x21c876['x']=_0x2a5ffa*this[_0x9e08eb(0x238)][_0x9e08eb(0x1f4)]*Math['cos'](convertation_1[_0x9e08eb(0x246)][_0x9e08eb(0x222)](_0x48f257)),_0x21c876['y']=_0x2a5ffa*this[_0x9e08eb(0x238)][_0x9e08eb(0x1f4)]*Math['sin'](convertation_1['Convertation']['deg_to_rad'](_0x48f257)),_0x21c876;},this[_0x26182f(0x243)]=()=>{const _0x55a98a=_0x26182f,_0x373ac3={'x':0x0,'y':0x0,'z':0x0},_0xe3e377=telemetryManager_1[_0x55a98a(0x226)][_0x55a98a(0x239)](),_0x4adcd3=convertation_1[_0x55a98a(0x246)]['GEOPOINT3D_to_GEOJSON_POINT'](_0xe3e377[_0x55a98a(0x203)]),_0xf8070c=geoCalc_1['GeoCalc'][_0x55a98a(0x211)](_0x4adcd3,this[_0x55a98a(0x230)][_0x55a98a(0x201)]),_0x479f25=0x2,_0x3871e1=this[_0x55a98a(0x1fa)](_0x479f25),_0x2cc122=geoCalc_1['GeoCalc']['calcDistance'](_0x3871e1,convertation_1[_0x55a98a(0x246)][_0x55a98a(0x207)](this[_0x55a98a(0x230)][_0x55a98a(0x201)])),_0x9af969=geoCalc_1[_0x55a98a(0x1ee)][_0x55a98a(0x211)](convertation_1[_0x55a98a(0x246)][_0x55a98a(0x217)](_0x3871e1),this[_0x55a98a(0x230)][_0x55a98a(0x201)]),_0x38a713=Math[_0x55a98a(0x1ef)](_0x2cc122-this[_0x55a98a(0x238)][_0x55a98a(0x228)]),_0xf37ad1=Math['min'](0x1,Math[_0x55a98a(0x208)](_0x38a713,0x2));return _0x373ac3['x']=_0xf37ad1*this['defaultConfig']['VELOCITY_MPS']*Math[_0x55a98a(0x23c)](convertation_1[_0x55a98a(0x246)][_0x55a98a(0x222)](_0x9af969)),_0x373ac3['y']=_0xf37ad1*this[_0x55a98a(0x238)]['VELOCITY_MPS']*Math[_0x55a98a(0x1e9)](convertation_1['Convertation'][_0x55a98a(0x222)](_0x9af969)),_0x373ac3;},this['extrapolateLocation']=_0x1b82b2=>{const _0x22a62b=_0x26182f,_0x228a5d=telemetryManager_1[_0x22a62b(0x226)]['getTelemetry'](),_0x463636=_0x228a5d[_0x22a62b(0x214)]*_0x1b82b2;_0x228a5d['velocityAzimuth'];const _0xc25895=geoCalc_1[_0x22a62b(0x1ee)][_0x22a62b(0x1f8)](convertation_1[_0x22a62b(0x246)][_0x22a62b(0x1f7)](_0x228a5d[_0x22a62b(0x203)]),_0x463636,_0x228a5d[_0x22a62b(0x21d)]);return _0xc25895;},this[_0x26182f(0x20b)]=()=>{const _0x4305e3=_0x26182f;let _0x3a308b=0x0;const _0x574f08=this[_0x4305e3(0x245)][_0x4305e3(0x213)]/this[_0x4305e3(0x238)]['HEIGHT_SLOWDOWN_METER'],_0x56646f=Math[_0x4305e3(0x229)](0x1,Math[_0x4305e3(0x208)](_0x574f08,0x2));return _0x3a308b=_0x56646f*this['defaultConfig'][_0x4305e3(0x1ea)]*Math[_0x4305e3(0x23e)](this['serviceObject'][_0x4305e3(0x213)]),_0x3a308b;},this['computeDistanceToTarget']=(_0x44bf39,_0x2d7b67,_0x2f3f98=0x2)=>{const _0x5c9f9e=_0x26182f,_0x4d81c4=convertation_1[_0x5c9f9e(0x246)][_0x5c9f9e(0x1f7)](_0x44bf39[_0x5c9f9e(0x203)]),_0x246c31=_0x44bf39[_0x5c9f9e(0x214)]*_0x2f3f98,_0x28d3a3=_0x44bf39[_0x5c9f9e(0x21d)];let _0x25622b=0x0,_0x2ff823;return geoCalc_1[_0x5c9f9e(0x1ee)][_0x5c9f9e(0x1fd)](_0x4d81c4)&&Number[_0x5c9f9e(0x209)](_0x246c31)&&Number['isFinite'](_0x28d3a3)&&(_0x2ff823=geoCalc_1[_0x5c9f9e(0x1ee)][_0x5c9f9e(0x1f8)](_0x4d81c4,_0x246c31,_0x28d3a3)),_0x2ff823?_0x25622b=geoCalc_1[_0x5c9f9e(0x1ee)][_0x5c9f9e(0x236)](_0x2ff823,_0x2d7b67):_0x25622b=geoCalc_1[_0x5c9f9e(0x1ee)][_0x5c9f9e(0x236)](_0x4d81c4,_0x2d7b67),_0x25622b;},this[_0x26182f(0x202)]=()=>{const _0x204317=_0x26182f;return this[_0x204317(0x245)];},this[_0x26182f(0x21b)]=_0x44eede=>{const _0xdb46b9=_0x26182f;return this[_0xdb46b9(0x238)]=Object[_0xdb46b9(0x1f1)](Object[_0xdb46b9(0x1f1)]({},this[_0xdb46b9(0x238)]),_0x44eede),this[_0xdb46b9(0x238)];};}}exports[a10_0x540992(0x1fb)]=MoveToLocation,MoveToLocation['instance']=new MoveToLocation(),MoveToLocation[a10_0x540992(0x227)]=MoveToLocation['instance'][a10_0x540992(0x227)],MoveToLocation['start']=MoveToLocation[a10_0x540992(0x23a)][a10_0x540992(0x21c)],MoveToLocation[a10_0x540992(0x1ff)]=MoveToLocation['instance'][a10_0x540992(0x1ff)],MoveToLocation[a10_0x540992(0x1f3)]=MoveToLocation['instance'][a10_0x540992(0x1f2)],MoveToLocation[a10_0x540992(0x202)]=MoveToLocation[a10_0x540992(0x23a)][a10_0x540992(0x202)],MoveToLocation[a10_0x540992(0x21b)]=MoveToLocation[a10_0x540992(0x23a)][a10_0x540992(0x21b)];function a10_0x4924(){const _0x106bc0=['5imsVqO','setFZ','GEOJSON_POINT_to_POINT','pow','isFinite','../../../../../../../classes/applicationClasses/utility/convertation','computeForcesZ','computeShirtForces','../../commandManager','remote','EXTRAPOLATION_TIME','defineProperty','calcBearing','isValidTelemetry','deltaHeight','velocityScalar','setFY','../../../airVehicle/telemetryManager','POINT_to_GEOJSON_POINT','requestedHeightATP','requestParameters','HEIGHT_TOLERANCE_METER','updateDefaultConfig','start','velocityAzimuth','point','stopMoveMethod','../../../../../../../classes/applicationClasses/utility/geoCalc','__esModule','deg_to_rad','checkIfNeedToContinue','setParams','computeForcesXY','TelemetryManager','listen','DISTANCE_SLOWDOWN_METER','min','227025GFzpjj','48xZFyMa','success','GEOPOINT3D_to_GEOJSON_POINT','DISTANCE_TOLERANCE_METER','description','moveToLocationParams','34167blliZz','commandLoopInterval','153432ZjGOeZ','54156ZGiWbw','1191456UIvZBf','calcDistance','setFX','defaultConfig','getTelemetry','instance','startMoveMethod','cos','597654dPpcFk','sign','type','velocity','log','ALGORITHM_TYPE','computeForcesXY_newLogic','stopCommandIntervalIfNeed','serviceObject','Convertation','sin','VELOCITY_HEIGHT_MPS','../../../../../../../classes/typings/all.typings','height_above_takeoff','ALGORITHM_MOVE_SERVICE_STATUS','GeoCalc','abs','data','assign','getStatus','status','VELOCITY_MPS','101985cQtbtT','angleTo0_360','GEOPOINT3D_to_POINT3D','calcDestination','stopNow','extrapolateLocation','MoveToLocation','CommandManager','isPOINT','servicesConfig','stop','updateAlgorithmStatuses','geoLocation','getServiceObject','gps_position','MoveToLocation\x20-\x20START\x20TO\x20MOVE'];a10_0x4924=function(){return _0x106bc0;};return a10_0x4924();}